<!DOCTYPE html><html><head>
      <title>Apuntes</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}@font-face{font-family:"Material Icons";font-style:normal;font-weight:400;src:local("Material Icons"),local("MaterialIcons-Regular"),url("data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAfIAAsAAAAADDAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAARAAAAFZW7kosY21hcAAAAYAAAADTAAACjtP6ytBnbHlmAAACVAAAAxgAAAQ4zRtvlGhlYWQAAAVsAAAALwAAADYRwZsnaGhlYQAABZwAAAAcAAAAJAeKAzxobXR4AAAFuAAAABIAAAA8OGQAAGxvY2EAAAXMAAAAIAAAACAG5AfwbWF4cAAABewAAAAfAAAAIAEfAERuYW1lAAAGDAAAAVcAAAKFkAhoC3Bvc3QAAAdkAAAAYgAAAK2vz7wkeJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2BkPsQ4gYGVgYOpk+kMAwNDP4RmfM1gxMjBwMDEwMrMgBUEpLmmMDgwVLy4xKzzX4chhrmK4QpQmBEkBwAZygyweJzFkr0NwjAQhZ+TEP6CRUfHBEwRUWaQTICyQbpMwRCskA5RUIONxG0RnnNpKAIV4qzPku/8c353ACYAYrIjCWCuMAh2ptf0/hiL3p/gyPUWa3osqlt0L1zu9r71z8dGrJRykFoauXQd932Lj5vhG+MjxGeYI8MKETObMpslf5EyP8tg+vHun5r539PvlvXzaVhRFVQDTPEWKVQR90KhnnC5Ek67vUKN4VuFasM/ldARj43CCkCsEjpJSoVVgRyU0GVSK6wUpFFCx8lFgX0BiXpRPQB4nE2TTWjcRhTH3xttpDhxN7uxPlp3u/FK7moRPixafRijNosxSw/LUsIwNcaEHPZggo/FmEKMCKWU4kNOOftQSlhE8alnH0Ix9BqWnHooPRrTQ0+mnu2bXTu2pPdGM9LM/6c3fwECTM4gBBMYQNqxzLrZAjqYSlqu2TAHZQA0/DQJH6FtzqGDnvbt4Ggwvzw/nL8EfH8kW0fsuRqhgWXZnY7M1picaUL7Du5BHeDzMIl83dAt016wH1qmvtSMo5R6YRJHTR//FXsff/nj/tc/5K9P5d+nP22+fFK5u7v3K39SW3y+OtDKO3L85vD09PD9z5X17a2N1g4tqk01RlqX7gyoEmnsWQtVr4rtZMmukEaFBZxzefkCn11cyKMLZgshRwgTYNoLNXCBz2ja7HvZG7hDpPSNfoo5vs0knK/9hb+rNpu+8kHPgk/Ao4kK3tWtTpSEtvkA9c+wE6UaUdwieNkaHg55tBEtRiEPw1s0+FtrtTcc9two2lhMknV7PZF/cs6+uUFTmpTGbEx7sQCPSLOttHS3GRltqp7SNzVSKzl6aWnZT/CX5k6/v9N3Hh8fHBwffJVjhrC6OgH5dkIt/tPsq+d/PD5Qz7G7efzq1THFjdZVPe/N6ulQ3JnDWSE5junsFsVIiFwL/htf1S5gJ3BfOcUxfHKLnzqpFpyfZ9cX+/5WB6a+Y0pHpzkNrYNVDwMsikK+y7WuLCRg/oFHkA8VT3rDg5ZnU6ktzzINymV0m74Xd5pfIGXyFeVEQSShkzqG7TBBa2OxVRKitLXv7h3uuftXnXq7lz2tZ/WnWa9dx9dCjDhHzmuVQATlmljr9dZErUydSo2Hbi/b1vXtrOeGCk2/8s3ZlO8+ueJT8BVlw5pGw2oYccdSiHHqx0RlabHqdNR9jAETl6PreJcPBnnfpTLnOQ8C3OV8AmQGzouV1iZdeb5SSIoVc8W8/kcDtksUH5FrU6/aqBqNWcMEzxG4DAQ14qRQhi9mWU0rzepKezbjfgCwQKxVYq5ajRgpRqy45CqwkJydcEkbTkvRz8P5/2ZpDTN4nGNgZGBgAOKb6v+/xvPbfGXgZmEAgeuB2kkI+v8bFgbmKiCXg4EJJAoAPyAKhQB4nGNgZGBg1vmvwxDDwgACQJKRARXwAwAzZQHQeJxjYQCCFAYGFgbSMQAcWACdAAAAAAAAAAwALgBgAIQAmADSAQgBIgE8AVABoAHeAfwCHHicY2BkYGDgZ7BgYGMAASYg5gJCBob/YD4DAA/hAWQAeJxlkbtuwkAURMc88gApQomUJoq0TdIQzEOpUDokKCNR0BuzBiO/tF6QSJcPyHflE9Klyyekz2CuG8cr7547M3d9JQO4xjccnJ57vid2cMHqxDWc40G4Tv1JuEF+Fm6ijRfhM+oz4Ra6eBVu4wZvvMFpXLIa40PYQQefwjVc4Uu4Tv1HuEH+FW7i1mkKn6Hj3Am3sHC6wm08Ou8tpSZGe1av1PKggjSxPd8zJtSGTuinyVGa6/Uu8kxZludCmzxMEzV0B6U004k25W35fj2yNlCBSWM1paujKFWZSbfat+7G2mzc7weiu34aczzFNYGBhgfLfcV6iQP3ACkSaj349AxXSN9IT0j16JepOb01doiKbNWt1ovippz6sVYYwsXgX2rGVFIkq7Pl2PNrI6qW6eOshj0xaSq9mpNEZIWs8LZUfOouNkVXxp/d5woqebeYIf4D2J1ywQB4nG3LOw6AIBAE0B384B+PAkgEa+QwNnYmHt+EpXSal5lkSBBnoP8oCFSo0aCFRIceA0ZMmLFAYSW88rmvtMUjG3RiQ9HvpfusM6zWNmtc5H/iPewha50tOt5PS/QBx2IeSwAA") format("woff")}.admonition{box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2);position:relative;margin:1.5625em 0;padding:0 1.2rem;border-left:.4rem solid rgba(68,138,255,.8);border-radius:.2rem;background-color:rgba(255,255,255,.05);overflow:auto}.admonition>p{margin-top:.8rem}.admonition>.admonition-title{margin:0 -1.2rem;padding:.8rem 1.2rem .8rem 3.6rem;border-bottom:1px solid rgba(68,138,255,.2);background-color:rgba(68,138,255,.1);font-weight:700}.admonition>.admonition-title:before{position:absolute;left:1.2rem;font-size:1.5rem;color:rgba(68,138,255,.8);content:"\E3C9"}.admonition>.admonition-title:before{font-family:Material Icons;font-style:normal;font-variant:normal;font-weight:400;line-height:2rem;text-transform:none;white-space:nowrap;speak:none;word-wrap:normal;direction:ltr}.admonition.abstract,.admonition.summary,.admonition.tldr{border-left-color:rgba(0,176,255,.8)}.admonition.abstract>.admonition-title,.admonition.summary>.admonition-title,.admonition.tldr>.admonition-title{background-color:rgba(0,176,255,.1);border-bottom-color:rgba(0,176,255,.2)}.admonition.abstract>.admonition-title:before,.admonition.summary>.admonition-title:before,.admonition.tldr>.admonition-title:before{color:#00b0ff;content:"\E8D2"}.admonition.hint,.admonition.tip{border-left-color:rgba(0,191,165,.8)}.admonition.hint>.admonition-title,.admonition.tip>.admonition-title{background-color:rgba(0,191,165,.1);border-bottom-color:rgba(0,191,165,.2)}.admonition.hint>.admonition-title:before,.admonition.tip>.admonition-title:before{color:#00bfa5;content:"\E80E"}.admonition.info,.admonition.todo{border-left-color:rgba(0,184,212,.8)}.admonition.info>.admonition-title,.admonition.todo>.admonition-title{background-color:rgba(0,184,212,.1);border-bottom-color:rgba(0,184,212,.2)}.admonition.info>.admonition-title:before,.admonition.todo>.admonition-title:before{color:#00b8d4;content:"\E88E"}.admonition.check,.admonition.done,.admonition.success{border-left-color:rgba(0,200,83,.8)}.admonition.check>.admonition-title,.admonition.done>.admonition-title,.admonition.success>.admonition-title{background-color:rgba(0,200,83,.1);border-bottom-color:rgba(0,200,83,.2)}.admonition.check>.admonition-title:before,.admonition.done>.admonition-title:before,.admonition.success>.admonition-title:before{color:#00c853;content:"\E876"}.admonition.faq,.admonition.help,.admonition.question{border-left-color:rgba(100,221,23,.8)}.admonition.faq>.admonition-title,.admonition.help>.admonition-title,.admonition.question>.admonition-title{background-color:rgba(100,221,23,.1);border-bottom-color:rgba(100,221,23,.2)}.admonition.faq>.admonition-title:before,.admonition.help>.admonition-title:before,.admonition.question>.admonition-title:before{color:#64dd17;content:"\E887"}.admonition.attention,.admonition.caution,.admonition.warning{border-left-color:rgba(255,145,0,.8)}.admonition.attention>.admonition-title,.admonition.caution>.admonition-title,.admonition.warning>.admonition-title{background-color:rgba(255,145,0,.1);border-bottom-color:rgba(255,145,0,.2)}.admonition.attention>.admonition-title:before{color:#ff9100;content:"\E417"}.admonition.caution>.admonition-title:before,.admonition.warning>.admonition-title:before{color:#ff9100;content:"\E002"}.admonition.fail,.admonition.failure,.admonition.missing{border-left-color:rgba(255,82,82,.8)}.admonition.fail>.admonition-title,.admonition.failure>.admonition-title,.admonition.missing>.admonition-title{background-color:rgba(255,82,82,.1);border-bottom-color:rgba(255,82,82,.2)}.admonition.fail>.admonition-title:before,.admonition.failure>.admonition-title:before,.admonition.missing>.admonition-title:before{color:#ff5252;content:"\E14C"}.admonition.bug,.admonition.danger,.admonition.error{border-left-color:rgba(255,23,68,.8)}.admonition.bug>.admonition-title,.admonition.danger>.admonition-title,.admonition.error>.admonition-title{background-color:rgba(255,23,68,.1);border-bottom-color:rgba(255,23,68,.2)}.admonition.danger>.admonition-title:before{color:#ff1744;content:"\E3E7"}.admonition.error>.admonition-title:before{color:#ff1744;content:"\E14C"}.admonition.bug>.admonition-title:before{color:#ff1744;content:"\E868"}.admonition.example,.admonition.snippet{border-left-color:rgba(0,184,212,.8)}.admonition.example>.admonition-title,.admonition.snippet>.admonition-title{background-color:rgba(0,184,212,.1);border-bottom-color:rgba(0,184,212,.2)}.admonition.example>.admonition-title:before,.admonition.snippet>.admonition-title:before{color:#00b8d4;content:"\E242"}.admonition.cite,.admonition.quote{border-left-color:rgba(158,158,158,.8)}.admonition.cite>.admonition-title,.admonition.quote>.admonition-title{background-color:rgba(158,158,158,.1);border-bottom-color:rgba(158,158,158,.2)}.admonition.cite>.admonition-title:before,.admonition.quote>.admonition-title:before{color:#9e9e9e;content:"\E244"}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
@font-face {
  font-family: 'Catamaran';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/catamaran/v19/o-0bIpQoyXQa2RxT7-5B6Ryxs2E_6n1iPHjd5a7dvg.ttf) format('truetype');
}
.markdown-preview.markdown-preview .caso_estudio {
  background-color: #f5f5f5;
  border: 2px solid #969696;
  padding: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .ejercicio {
  background-color: #f5faf5;
  border: 2px solid #969b96;
  padding-left: 15px;
  padding-right: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .contenedor {
  display: flex;
  justify-content: center;
  margin: 30px auto 30px auto;
}
.markdown-preview.markdown-preview .fondo {
  background: url(https://programacioniesbalmis.github.io/Imagenes/BannersMoodle/banner.png);
  background-size: cover;
  width: 75%;
  height: 160px;
  border-radius: 10px;
  position: relative;
}
.markdown-preview.markdown-preview .cita {
  font-family: Arial;
  font-style: italic;
  font-weight: 600;
  text-align: justify;
  line-height: 1.5rem;
  opacity: 0.6;
  color: white;
  padding: 5rem;
  position: relative;
  top: 50%;
  left: 50%;
  font-size: 1.3rem;
  transform: translate(-50%, -50%);
}
.markdown-preview.markdown-preview .abre_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-left: 30px;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, -15%);
}
.markdown-preview.markdown-preview .cierra_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-right: 30px;
  right: 0%;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, 55%);
}
.markdown-preview.markdown-preview .autor {
  font-family: Arial;
  color: white;
  margin: 0px;
  padding-left: 30px;
  position: absolute;
  top: 83%;
  font-size: 1rem;
}
.markdown-preview.markdown-preview .flotante {
  display: flex;
  margin-top: 15px;
  margin-bottom: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    justify-content: center;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    justify-content: space-between;
  }
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: column;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: row;
  }
}
.markdown-preview.markdown-preview .flotante_izq {
  margin-right: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: auto;
  }
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: auto;
  }
}
.markdown-preview.markdown-preview .galeria_imagenes {
  display: flex;
  justify-content: space-evenly;
  align-items: center;
  margin-top: 15px;
  margin-bottom: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .galeria_imagenes {
    flex-direction: column;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .galeria_imagenes {
    flex-direction: row;
  }
}

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="lenguaje-sql">Lenguaje SQL </h1>
<h2 id="contenidos">Contenidos </h2>
<ol>
<li>Lenguaje de Manipulación de Datos</li>
<li>Consultas SELECT básicas</li>
<li>Consultas SELECT de AGRUPACIÓN</li>
<li>Consultas SELECT multitabla</li>
</ol>
<h2 id="lenguaje-de-manipulación-de-datos">Lenguaje de Manipulación de Datos </h2>
<p>El <strong>Lenguaje de Manipulación de Datos</strong> (LMD, en inglés Data Manipulation Language, DML) es un lenguaje proporcionado por el sistema de gestión de base de datos que permite a los usuarios de la misma llevar a cabo las tareas de consulta o manipulación de los datos (inserción, borrado, actualización y consultas) basado en el modelo de datos adecuado.</p>
<div class="admonition note">
<p class="admonition-title"><a href="http://dev.mysql.com/doc/refman/8.0/en/sql-syntax-data-manipulation.html">MySQL Oficial – Sintaxis de las instrucciones DML</a></p>
</div>
<p>Las <strong>consultas</strong> recuperan información de las tablas de una base de datos mediante la selección de campos, la realización de filtros y la transformación de los datos recuperados.</p>
<p>El uso de consultas permite:</p>
<ul>
<li><strong>Elegir tablas.</strong> Se puede obtener información de una sola tabla o de varias.</li>
<li><strong>Elegir campos.</strong> Se pueden especificar los campos a visualizar de cada tabla.</li>
<li><strong>Elegir registros.</strong> Se pueden seleccionar los registros a mostrar en la hoja de respuestas dinámica, especificando un criterio.</li>
<li><strong>Ordenar registros.</strong> Se puede ordenar la información en forma ascendente o<br>
descendente.</li>
<li><strong>Realizar cálculos.</strong> Se pueden emplear las consultas para hacer cálculos con los datos de las tablas.</li>
</ul>
<p>Además, en consultas más complejas se puede:</p>
<ul>
<li><strong>Crear tablas.</strong> Se puede generar otra tabla a partir de los datos combinados de una consulta. La tabla se genera a partir de la hoja de respuestas dinámica.</li>
<li><strong>Consultas encadenadas.</strong> Utilizar una consulta como origen de datos para otras consultas (subconsulta). Se pueden crear consultas adicionales basadas en un conjunto de registros seleccionados por una consulta anterior.</li>
</ul>
<h2 id="consultas-select-básicas">Consultas SELECT básicas </h2>
<h4 id="consultas-con-operaciones-numéricas-y-literales">Consultas con operaciones numéricas y literales </h4>
<p>Comenzaremos por utilizar la instrucción SELECT como si fuera una calculadora.<br>
Para ello utilizaremos los siguientes operadores aritméticos:</p>
<table>
<thead>
<tr>
<th style="text-align:left">Operador</th>
<th style="text-align:left">Función</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>+</strong></td>
<td style="text-align:left">Suma</td>
</tr>
<tr>
<td style="text-align:left"><strong>-</strong></td>
<td style="text-align:left">Resta</td>
</tr>
<tr>
<td style="text-align:left"><strong>*</strong></td>
<td style="text-align:left">Producto o Multiplicación</td>
</tr>
<tr>
<td style="text-align:left"><strong>/</strong></td>
<td style="text-align:left">División</td>
</tr>
<tr>
<td style="text-align:left"><strong>DIV</strong></td>
<td style="text-align:left">División entera</td>
</tr>
<tr>
<td style="text-align:left"><strong>MOD</strong> o <strong>%</strong></td>
<td style="text-align:left">Resto división</td>
</tr>
</tbody>
</table>
<p><strong>Ejemplos</strong><br>
Los siguientes ejemplos evaluan las expresiones que hay después de la cláusula SELECT y muestran el resultado por pantalla. El último ejemplo muestra tres columnas.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token number">20</span><span class="token operator">*</span><span class="token number">150</span><span class="token punctuation">;</span>
</code></pre><pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token operator">*</span><span class="token number">4.5</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">7</span><span class="token punctuation">;</span>
</code></pre><pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token operator">DIV</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">100</span> MOD <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre><div class="admonition note">
<p class="admonition-title"> <u>Referencias</u> <br><a href="http://mysql.conclase.net/curso/?cap=010b#OPE_ARITMETICOS">MySQL – Operadores aritméticos</a><br><a href="https://dev.mysql.com/doc/refman/8.0/en/non-typed-operators.html">MySQL Oficial - Operadores</a></p>
</div>
<p>Para el uso de literales o cadenas de caracteres basta con colocar unas comillas:</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">'Felicidades'</span><span class="token punctuation">;</span>
</code></pre><pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">'Precio'</span><span class="token punctuation">,</span> <span class="token string">'25*1.21='</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token operator">*</span><span class="token number">1.21</span><span class="token punctuation">;</span>
</code></pre><h4 id="consultas-con-funciones-predefinidas-de-información">Consultas con funciones predefinidas de información </h4>
<p>A través de funciones ya predefinidas en el MySQL podemos obtener información sobre diferentes aspectos del  estado de nuestra conexión y del sistema. Algunos ejemplos son:</p>
<p>La versión de MySQL y nuestro identificador (ID) de conexión.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> connection_id<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>El usuario actual con el que estamos conectados y la base de datos seleccionada.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-user">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword keyword-database">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Para saber la fecha y hora (now()) o sólo la fecha current_date()) del sistema.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword keyword-current_date">current_date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="admonition note">
<p class="admonition-title"> <u>Referencias</u> <br><a href="https://conclase.net/mysql/curso/sqlfun/CURRENT_USER">MySQL – Funciones de información</a><br><a href="https://dev.mysql.com/doc/refman/8.0/en/information-functions.html">MySQL Oficial – Funciones de información</a></p>
</div>
<h4 id="consultas-básicas-a-tablas">Consultas básicas a tablas </h4>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token punctuation">[</span><span class="token keyword keyword-DISTINCT">DISTINCT</span><span class="token punctuation">]</span> campos
<span class="token punctuation">[</span><span class="token keyword keyword-FROM">FROM</span> table_references
<span class="token punctuation">[</span><span class="token keyword keyword-WHERE">WHERE</span> where_definition<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword keyword-ORDER">ORDER</span> <span class="token keyword keyword-BY">BY</span> {col_name <span class="token operator">|</span> expr <span class="token operator">|</span> position} <span class="token punctuation">[</span><span class="token keyword keyword-ASC">ASC</span> <span class="token operator">|</span> <span class="token keyword keyword-DESC">DESC</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword keyword-LIMIT">LIMIT</span> <span class="token punctuation">[</span><span class="token keyword keyword-offset">offset</span><span class="token punctuation">,</span><span class="token punctuation">]</span> row_count<span class="token punctuation">]</span>
</code></pre><p>Es importante conocer el orden de las cláusulas:</p>
<pre data-role="codeBlock" data-info="txt" class="language-txt txt"><code>SELECT … FROM … WHERE … ORDER … LIMIT
</code></pre><h4 id="utilidad-de-captura">Utilidad de captura </h4>
<p>En muchas ocasiones nos interesaría llevar un registro de las instrucciones SQL ejecutadas y su resultrado. Conectados con la utilidad <code>mysql.exe</code> a MySQL podemos grabar toda la salida a un archivo a través de un comando:</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>mysql&gt; tee archivo.txt
mysql&gt; … instrucciones SQL …
</code></pre><p>Para terminar la salida:</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>mysql&gt; notee
</code></pre><h4 id="ejemplos-de-las-primeras-consultas">Ejemplos de las primeras consultas </h4>
<p>Con XAMPP-MySQL importar la BD de jardinería que facilitará el profesor.</p>
<p><strong>Ejemplo E52501 - Tablas completas</strong><br>
Mostrar todos los campos de todos los clientes.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> clientes<span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52502 - Seleccionar campos a mostrar</strong><br>
Mostrar los campos CodigoCliente, NombreCliente, Telefono, Ciudad, Region, Pais de todos los clientes.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CodigoCliente<span class="token punctuation">,</span> NombreCliente<span class="token punctuation">,</span> Telefono<span class="token punctuation">,</span> Ciudad<span class="token punctuation">,</span> Region<span class="token punctuation">,</span> Pais
<span class="token keyword keyword-FROM">FROM</span> clientes<span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52503 – Campos calculados</strong><br>
Mostrar los campos CodigoCliente, NombreCliente, LimiteCredito de todos los clientes añadiendo un campo calculado que se el LimiteCreditoMensual como LimiteCredito/12. Haced la division entera para evitar decimales. Utilizaremos el <strong>alias de campo</strong> con la palabra reservada <strong>AS</strong>.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CodigoCliente<span class="token punctuation">,</span> NombreCliente<span class="token punctuation">,</span> LimiteCredito<span class="token punctuation">,</span> LimiteCredito <span class="token operator">DIV</span> <span class="token number">12</span> <span class="token keyword keyword-AS">AS</span> LimiteCreditoMensual
<span class="token keyword keyword-FROM">FROM</span> clientes<span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52504 – No mostrar repetidos</strong><br>
Mostrar las regiones (campo Region) todos los clientes evitando resultandos repetidos.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-DISTINCT">DISTINCT</span> Region
<span class="token keyword keyword-FROM">FROM</span> clientes<span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52506 – Ordenar registros</strong><br>
Mostrar todos los campos de todos los clientes ordenados por LimiteCredito ordenado descendentemente.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span> <span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-ORDER">ORDER</span> <span class="token keyword keyword-BY">BY</span> LimiteCredito <span class="token keyword keyword-DESC">DESC</span><span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52507 – Limitar el número de registros a mostrar del resultado</strong><br>
Utilizando la consulta del ejercicio anterior E5106 mostrar:</p>
<ul>
<li>Sólo los 5 primeros registros</li>
<li>Empezando en el tercer registro, mostrar 10 registros</li>
</ul>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span> 
<span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-ORDER">ORDER</span> <span class="token keyword keyword-BY">BY</span> LimiteCredito <span class="token keyword keyword-DESC">DESC</span>
<span class="token keyword keyword-LIMIT">LIMIT</span> <span class="token number">5</span><span class="token punctuation">;</span>
</code></pre><pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-ORDER">ORDER</span> <span class="token keyword keyword-BY">BY</span> LimiteCredito <span class="token keyword keyword-DESC">DESC</span>
<span class="token keyword keyword-LIMIT">LIMIT</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">;</span>
</code></pre><h4 id="consultas-con-selección-de-registros">Consultas con selección de registros </h4>
<p>Para poder seleccionar registros es necesario indicar la condición que deben cumplir los campos de un registro para ser mostrado. Para ello se utiliza la sección <strong>WHERE</strong> de la instrucción SQL.<br>
Los operadores relacionales que nos permiten comparar el valor de los campos son:</p>
<table>
<thead>
<tr>
<th style="text-align:left">Operador</th>
<th style="text-align:left">Función</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>=</strong></td>
<td style="text-align:left">Igual a</td>
</tr>
<tr>
<td style="text-align:left"><strong>&lt;</strong></td>
<td style="text-align:left">Menor que</td>
</tr>
<tr>
<td style="text-align:left"><strong>&gt;</strong></td>
<td style="text-align:left">Mayor que</td>
</tr>
<tr>
<td style="text-align:left"><strong>&lt;=</strong></td>
<td style="text-align:left">Menor o igual</td>
</tr>
<tr>
<td style="text-align:left"><strong>&gt;=</strong></td>
<td style="text-align:left">Mayor ou igual</td>
</tr>
<tr>
<td style="text-align:left"><strong>LIKE</strong></td>
<td style="text-align:left">Patrón que debe cumprir un campo cadena</td>
</tr>
<tr>
<td style="text-align:left"><strong>BETWEEN</strong></td>
<td style="text-align:left">Intervalo de valores</td>
</tr>
<tr>
<td style="text-align:left"><strong>IN</strong></td>
<td style="text-align:left">Conjunto de valores</td>
</tr>
<tr>
<td style="text-align:left"><strong>IS NULL</strong></td>
<td style="text-align:left">Es nulo</td>
</tr>
<tr>
<td style="text-align:left"><strong>IS NOT NULL</strong></td>
<td style="text-align:left">No es nulo</td>
</tr>
</tbody>
</table>
<p>Veamos unos cuantos ejemplos:</p>
<p><strong>Ejemplo E52601 – Buscar un registro por el valor de su clave</strong><br>
Mostrar todos los campos del cliente con código igual a 12.</p>
<blockquote>
<p><strong>Nota:</strong> Al ser el campo clave, el resultado sólo mostrará un registro.</p>
</blockquote>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-WHERE">WHERE</span> CodigoCliente <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52602 – Buscar registros por el valor de un campo</strong><br>
Mostrar todos los campos de los clientes de la Región Madrid.</p>
<blockquote>
<p><strong>Nota:</strong> Al no ser un campo clave, el resultado puede mostrar más de un registro.</p>
</blockquote>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-WHERE">WHERE</span> Region <span class="token operator">=</span> <span class="token string">'Madrid'</span><span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52603 – Buscar registros por comparación del valor de un campo</strong><br>
Mostrar todos los campos de los clientes con Límite de Crédito mayor de 50000€.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-WHERE">WHERE</span> LimiteCredito <span class="token operator">&gt;</span> <span class="token number">50000</span><span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52604 – Buscar registros por comparación del valor de un campo</strong><br>
Mostrar todos los campos de los clientes con Límite de Crédito entre 10000€ y 60000€.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-WHERE">WHERE</span> LimiteCredito <span class="token operator">BETWEEN</span> <span class="token number">10000</span> <span class="token operator">AND</span> <span class="token number">60000</span><span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52605 – Buscar registros por comparación del valor de un campo</strong><br>
Mostrar todos los campos de los clientes con la Región nula.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-WHERE">WHERE</span> Region <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52606 – Ejemplo combinando con el apartado anterior</strong><br>
Mostrar los Países de los clientes con la Región nula, sin repetir valores.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-DISTINCT">DISTINCT</span> Pais 
<span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-WHERE">WHERE</span> Region <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52607 – Ejemplo con LIKE</strong><br>
Mostrar los Empleados cuyo email contenga "jardin".</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> Empleados
<span class="token keyword keyword-WHERE">WHERE</span> Email <span class="token operator">LIKE</span> <span class="token string">'%jardin%'</span><span class="token punctuation">;</span>
</code></pre><table>
<tbody><tr><td><b>%</b></td><td>es una cadena de caracteres cualquiera</td></tr>
<tr><td><b>_</b></td><td>es un sólo carácter cualquiera</td></tr>
</tbody></table>
<p><strong>Ejemplo E52608 –Ejemplo con IN</strong><br>
Mostrar los productos de las gamas 'Aromáticas', 'Herramientas' y Ornamentales'.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> productos
<span class="token keyword keyword-WHERE">WHERE</span> Gama <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'Aromáticas'</span><span class="token punctuation">,</span> <span class="token string">'Herramientas'</span><span class="token punctuation">,</span> <span class="token string">'Ornamentales'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="admonition note">
<p class="admonition-title"> <u>Referencias</u> <br><a href="http://mysql.conclase.net/curso/?cap=009">MySQL – Consultas</a><br><a href="http://mysql.conclase.net/curso/?cap=010a#OPE_COMPARACION">MySQL – Operadores de comparación</a><br><a href="https://dev.mysql.com/doc/refman/8.0/en/comparison-operators.html">MySQL Oficial – Operadores de comparación</a></p>
</div>
<h4 id="consultas-con-varias-condiciones">Consultas con varias condiciones </h4>
<p>Para poder realizar varias varias condiciones necesitamos combinarlas con operadores lógicos, que en MySQL son:</p>
<table>
<thead>
<tr>
<th style="text-align:center">Operador</th>
<th style="text-align:center">Función</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>AND</strong></td>
<td style="text-align:center">Y</td>
</tr>
<tr>
<td style="text-align:center"><strong>OR</strong></td>
<td style="text-align:center">O</td>
</tr>
<tr>
<td style="text-align:center"><strong>NOT</strong></td>
<td style="text-align:center">No</td>
</tr>
</tbody>
</table>
<p>Veamos unos cuantos ejemplos:</p>
<p><strong>Ejemplo E52701 – Ejemplo con varias condiciones</strong><br>
Mostrar codigo y nombre de los Productos que sean de la Gama 'Frutales' y CantidadEnSock sea mayor que 50 unidades.</p>
<blockquote>
<p><strong>Nota:</strong> Mostremos también los campos implicados en las condiciones para comprobar el resultado.</p>
</blockquote>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CodigoProducto<span class="token punctuation">,</span> Nombre<span class="token punctuation">,</span> Gama<span class="token punctuation">,</span>
<span class="token keyword keyword-FROM">FROM</span> productos
<span class="token keyword keyword-WHERE">WHERE</span> Gama<span class="token operator">=</span><span class="token string">'Frutales'</span> <span class="token operator">AND</span> CantidadEnStock <span class="token operator">&gt;</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52702 – Ejemplo con varias condiciones</strong><br>
Mostrar codigo y nombre de los Clientes que sean de la Ciudad 'Madrid' o 'Barcelona'.</p>
<blockquote>
<p><strong>Nota:</strong> Mostremos también los campos implicados en las condiciones para comprobar el resultado.</p>
</blockquote>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CodigoCliente<span class="token punctuation">,</span> NombreCliente<span class="token punctuation">,</span> Ciudad
<span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-WHERE">WHERE</span> Ciudad<span class="token operator">=</span><span class="token string">'Madrid'</span> <span class="token operator">OR</span> Ciudad<span class="token operator">=</span><span class="token string">'Barcelona'</span><span class="token punctuation">;</span>
</code></pre><div class="admonition note">
<p class="admonition-title"> <u>Referencias</u> <br><a href="http://mysql.conclase.net/curso/?cap=010#OPE_LOGICOS">MySQL – Consultas y operadores de comparación</a><br><a href="https://dev.mysql.com/doc/refman/8.0/en/logical-operators.html">MySQL Oficial – Consultas y operadores de comparación</a></p>
</div>
<h4 id="consultas-con-funciones">Consultas con funciones </h4>
<p>Las funciones nos permiten realizar transformaciones de los datos para obtener información. Existen multitud de funciones que procesan diferentes tipos de datos.</p>
<p><em><strong><u>Algunas funciones con cadenas de caracteres</u></strong></em></p>
<table>
<thead>
<tr>
<th style="text-align:left">Función</th>
<th style="text-align:left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>CONCAT(cad1, cad2, ...)</strong></td>
<td style="text-align:left">Concatena cadenas</td>
</tr>
<tr>
<td style="text-align:left"><strong>UPPER(cad)</strong></td>
<td style="text-align:left">Pasa a mayúsculas una cadena</td>
</tr>
<tr>
<td style="text-align:left"><strong>LOWER(cad)</strong></td>
<td style="text-align:left">Pasa a minúsculas una cadena</td>
</tr>
<tr>
<td style="text-align:left"><strong>LTRIM(cad)</strong></td>
<td style="text-align:left">Elimina de la cadena los espacios iniciales y finales</td>
</tr>
<tr>
<td style="text-align:left"><strong>LEFT(cad, X)</strong></td>
<td style="text-align:left">Obtiene los X primeros caracteres de la cadena</td>
</tr>
<tr>
<td style="text-align:left"><strong>RIGHT(cad, X)</strong></td>
<td style="text-align:left">Obtiene los X últimos caracteres de la cadena</td>
</tr>
<tr>
<td style="text-align:left"><strong>LENGTH(cad)</strong></td>
<td style="text-align:left">Longitud de una cadena</td>
</tr>
<tr>
<td style="text-align:left"><strong>REPLACE(cad, ant, pos)</strong></td>
<td style="text-align:left">Obtiene una cadena tomando <strong>cad</strong> como origen y cambiando <strong>ant</strong> por <strong>pos</strong></td>
</tr>
</tbody>
</table>
<p><em><strong><u>Algunas funciones numéricas de un campo</u></strong></em></p>
<table>
<thead>
<tr>
<th style="text-align:left">Función</th>
<th style="text-align:left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>RAND()</strong></td>
<td style="text-align:left">Número aleatorio entre 0 y 1</td>
</tr>
<tr>
<td style="text-align:left"><strong>POW(num, exp)</strong></td>
<td style="text-align:left">Obtiene la potencia de num^exp</td>
</tr>
<tr>
<td style="text-align:left"><strong>FLOOR(num)</strong></td>
<td style="text-align:left">Obtiene la parte entera de un número decimal</td>
</tr>
<tr>
<td style="text-align:left"><strong>ROUND(num, X)</strong></td>
<td style="text-align:left">Redondea un número a X decimales</td>
</tr>
<tr>
<td style="text-align:left"><strong>SIGN(num)</strong></td>
<td style="text-align:left">Devuelve 1 para positivo, 0 para 0 y -1 para negativo</td>
</tr>
<tr>
<td style="text-align:left"><strong>ABS(num)</strong></td>
<td style="text-align:left">Obtiene el valor absoluto de un número</td>
</tr>
</tbody>
</table>
<p><strong><em><u>Algunas funciones de fechas de un campo</u></em></strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Función</th>
<th style="text-align:left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>YEAR(campo)</strong></td>
<td style="text-align:left">Muestra el año del valor de un campo de tipo fecha</td>
</tr>
<tr>
<td style="text-align:left"><strong>MONTH(campo)</strong></td>
<td style="text-align:left">Muestra el mes del valor de un campo de tipo fecha</td>
</tr>
<tr>
<td style="text-align:left"><strong>DAY(campo)</strong></td>
<td style="text-align:left">Muestra el día del valor de un campo de tipo fecha</td>
</tr>
<tr>
<td style="text-align:left"><strong>DAYNAME(campo)</strong></td>
<td style="text-align:left">Muestra el nombre del día de la semana del campo</td>
</tr>
<tr>
<td style="text-align:left"><strong>DAYOFWEEK(campo)</strong></td>
<td style="text-align:left">Devuelve un número indicando el día de la semana de un campo fecha: <br><strong>Nota:</strong> 1=Domingo, 2=Lunes, 3=Martes, 4=Miércoles, 5=Jueves, 6=Viernes, 7=Sábado.</td>
</tr>
</tbody>
</table>
<p><em><strong><u>Algunas funciones numéricas con varios registros</u></strong></em></p>
<table>
<thead>
<tr>
<th style="text-align:left">Función</th>
<th style="text-align:left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>COUNT(*)</strong></td>
<td style="text-align:left">Cuenta los registros seleccionados</td>
</tr>
<tr>
<td style="text-align:left"><strong>MIN(campo)</strong></td>
<td style="text-align:left">Valor mínimo del campo de los registros seleccionados</td>
</tr>
<tr>
<td style="text-align:left"><strong>MAX(campo)</strong></td>
<td style="text-align:left">Valor máximo del campo de los registros seleccionados</td>
</tr>
<tr>
<td style="text-align:left"><strong>SUM(campo)</strong></td>
<td style="text-align:left">Suma de los valores del campo</td>
</tr>
<tr>
<td style="text-align:left"><strong>AVG(campo)</strong></td>
<td style="text-align:left">Media de los valores del campo</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title"><u>Referencias</u><br><a href="https://www.w3schools.com/sql/sql_ref_mysql.asp">MySQL w3schools – Funciones de MySQL</a><br><a href="https://dev.mysql.com/doc/refman/8.0/en/functions.htm">MySQL Oficial – Funciones</a></p>
</div>
<p><strong><u>Ejemplos de funciones para campos calculados y para condiciones</u></strong></p>
<p><strong>Ejemplo E52801 – Ejemplo con funciones</strong><br>
Mostrar código, nombre y "precio de venta al público" de los productos, pero ese precio debe ser con IVA incluido, es decir, agregarle al PrecioVenta el 21% multiplicándolo por 1.21. Asignar el alias <strong>pvp</strong> al nuevo campo calculado.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CodigoProducto<span class="token punctuation">,</span> Nombre<span class="token punctuation">,</span> PrecioVenta<span class="token punctuation">,</span> <span class="token function">ROUND</span><span class="token punctuation">(</span>PrecioVenta <span class="token operator">*</span> <span class="token number">1.21</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> pvp
<span class="token keyword keyword-FROM">FROM</span> Productos<span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52802 – Ejemplo con funciones en las condiciones</strong><br>
Seleccionar en la consulta anterior los productos que tengan el nuevo campo pvp mayor de 100€</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CodigoProducto<span class="token punctuation">,</span> Nombre<span class="token punctuation">,</span> PrecioVenta<span class="token punctuation">,</span> <span class="token function">ROUND</span><span class="token punctuation">(</span>PrecioVenta <span class="token operator">*</span> <span class="token number">1.21</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> pvp
<span class="token keyword keyword-FROM">FROM</span> Productos
<span class="token keyword keyword-WHERE">WHERE</span> <span class="token function">ROUND</span><span class="token punctuation">(</span>PrecioVenta <span class="token operator">*</span> <span class="token number">1.21</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">;</span>
</code></pre><p><strong><u>Ejemplos de funciones con cadenas de caracteres</u></strong></p>
<p><strong>Ejemplo E52803 – Ejemplo con funciones</strong><br>
Seleccionar de los empleados el nombre completo (NombreCompleto) concatenando el nombre y los dos apellidos.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CONCAT<span class="token punctuation">(</span>Nombre<span class="token punctuation">,</span><span class="token string">' '</span><span class="token punctuation">,</span>Apellido1<span class="token punctuation">,</span><span class="token string">' '</span><span class="token punctuation">,</span>Apellido2<span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> NombreCompleto
<span class="token keyword keyword-FROM">FROM</span> empleados<span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52804 – Ejemplo con funciones</strong><br>
Obtener la inicial del nombre de todos los empleados.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-LEFT">LEFT</span><span class="token punctuation">(</span>Nombre<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> inicial 
<span class="token keyword keyword-FROM">FROM</span> empleados<span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52805 – Ejemplo con funciones</strong><br>
Obtener el nombre de los empleados todo en mayúsculas.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token function">UCASE</span><span class="token punctuation">(</span>Nombre<span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> empleados<span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52806 – Ejemplo con funciones</strong><br>
Obtener el código de las oficinas pero sustituyendo el guión por la barra, es decir, el '-' por '/'.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-REPLACE">REPLACE</span><span class="token punctuation">(</span>CodigoOficina<span class="token punctuation">,</span><span class="token string">'-'</span><span class="token punctuation">,</span><span class="token string">'/'</span><span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> oficinas<span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52807 – Ejemplo con funciones</strong><br>
Obtener la primera palabra del nombre del proveedor de todos los productos.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> SUBSTRING_INDEX<span class="token punctuation">(</span>Proveedor<span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> productos<span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52808 – Ejemplo con funciones</strong><br>
Obtener el código de los productos pero conel orden de los caracteres invertido.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CodigoProducto<span class="token punctuation">,</span> REVERSE<span class="token punctuation">(</span>CodigoProducto<span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> productos<span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52809 – Ejemplo con funciones</strong><br>
Obtener un gráfico de barras para el stock de cada producto. Utilizaremos el carácter '|' por cada unidad de stock.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> Codigoproducto<span class="token punctuation">,</span><span class="token keyword keyword-REPEAT">REPEAT</span><span class="token punctuation">(</span><span class="token string">'|'</span><span class="token punctuation">,</span>CantidadEnStock<span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> productos<span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52810 – Ejemplo con funciones</strong><br>
Obtener el email de cada empleado teniendo en cuenta que el usuario es su nombre en minusculas y el dominio '@iesdoctorbalmis.com'</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CONCAT<span class="token punctuation">(</span><span class="token function">LCASE</span><span class="token punctuation">(</span>nombre<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'@iesdoctorbalmis.com'</span><span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> email
<span class="token keyword keyword-FROM">FROM</span> empleados<span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52811 – Ejemplo con funciones</strong><br>
Obtener la abreviatura del nombre y primer apellidos de los empleados concatenando la inicial del nombre y la inicial del apellido1</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CONCAT<span class="token punctuation">(</span><span class="token keyword keyword-LEFT">LEFT</span><span class="token punctuation">(</span>Nombre<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword keyword-LEFT">LEFT</span><span class="token punctuation">(</span>Apellido1<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> inicial
<span class="token keyword keyword-FROM">FROM</span> empleados<span class="token punctuation">;</span>
</code></pre><p><strong><u>Ejemplos de funciones numéricas</u></strong></p>
<p><strong>Ejemplo E52812 – Ejemplo con funciones</strong><br>
Obtener un número aleatorio entre 0 y 9.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> FLOOR<span class="token punctuation">(</span>RAND<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p><strong><u>Ejemplos de funciones de fechas</u></strong><br>
<strong>Ejemplo E52813 – Ejemplo con funciones</strong><br>
Mostrar en campos diferentes el año, el mes y el día de la fecha de los pedido.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-YEAR">YEAR</span><span class="token punctuation">(</span>FechaPedido<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword keyword-MONTH">MONTH</span><span class="token punctuation">(</span>FechaPedido<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword keyword-DAY">DAY</span><span class="token punctuation">(</span>FechaPedido<span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> pedidos<span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52814 – Ejemplo con funciones</strong><br>
Mostrar todos los campos de pedidos realizados en enero del 2009.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> pedidos
<span class="token keyword keyword-WHERE">WHERE</span> <span class="token keyword keyword-YEAR">YEAR</span><span class="token punctuation">(</span>FechaPedido<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2009</span> <span class="token operator">AND</span> <span class="token keyword keyword-MONTH">MONTH</span><span class="token punctuation">(</span>FechaPedido<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52815 – Ejemplo con funciones</strong><br>
Mostrar todos los campos de pedidos realziados en lunes.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> pedidos
<span class="token keyword keyword-WHERE">WHERE</span> DAYOFWEEK<span class="token punctuation">(</span>FechaEntrega<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre><p><strong><u>Ejemplos de funciones numéricas con varios registros</u></strong></p>
<p><strong>Ejemplo E52816 – Ejemplo con funciones</strong><br>
Mostrar el número total de pagos que se han recibido.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> pagos<span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52817 – Ejemplo con funciones</strong><br>
Mostrar la cantidad en euros total que nos han ingresado.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>Cantidad<span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> pagos<span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E52818 – Ejemplo con funciones</strong><br>
Mostrar el importe del pago más pequeño y el importe de pago más grande recibido.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>Cantidad<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">MAX</span><span class="token punctuation">(</span>Cantidad<span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> pagos<span class="token punctuation">;</span>
</code></pre><h2 id="consultas-select-de-agrupación">Consultas SELECT de AGRUPACIÓN </h2>
<h4 id="consultas-de-agrupación">Consultas de agrupación </h4>
<p>Cuando necesitamos agrupar varios registros para realizar operaciones para sumar, contar, o calcular la media, el mínimo o el máximo, necesitaremos realizar una instrucción SELECT indicando qué registros agrupamos, es decir, qué campos mostramos de los registros comunes y sobre qué campos realizamos la operación.<br>
La sintaxis para realizar una consulta agrupada a una tabla es:</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token punctuation">[</span><span class="token keyword keyword-DISTINCT">DISTINCT</span><span class="token punctuation">]</span> campos
<span class="token punctuation">[</span><span class="token keyword keyword-FROM">FROM</span> table_references
<span class="token punctuation">[</span><span class="token keyword keyword-WHERE">WHERE</span> where_definition<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword keyword-GROUP">GROUP</span> <span class="token keyword keyword-BY">BY</span> {col_name <span class="token operator">|</span> expr <span class="token operator">|</span> position} <span class="token punctuation">[</span><span class="token keyword keyword-ASC">ASC</span> <span class="token operator">|</span> <span class="token keyword keyword-DESC">DESC</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword keyword-HAVING">HAVING</span> where_definition<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword keyword-ORDER">ORDER</span> <span class="token keyword keyword-BY">BY</span> {col_name <span class="token operator">|</span> expr <span class="token operator">|</span> position} <span class="token punctuation">[</span><span class="token keyword keyword-ASC">ASC</span> <span class="token operator">|</span> <span class="token keyword keyword-DESC">DESC</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword keyword-LIMIT">LIMIT</span> <span class="token punctuation">[</span><span class="token keyword keyword-offset">offset</span><span class="token punctuation">,</span><span class="token punctuation">]</span> row_count<span class="token punctuation">]</span>
</code></pre><p>Es importante conocer el orden de las cláusulas:</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> … <span class="token keyword keyword-FROM">FROM</span> … <span class="token keyword keyword-WHERE">WHERE</span> … <span class="token keyword keyword-GROUP">GROUP</span> <span class="token keyword keyword-BY">BY</span> … <span class="token keyword keyword-HAVING">HAVING</span> … <span class="token keyword keyword-ORDER">ORDER</span> … <span class="token keyword keyword-LIMIT">LIMIT</span>
</code></pre><h4 id="ejemplos-de-las-primeras-consultas-agrupadas">Ejemplos de las primeras consultas agrupadas </h4>
<p>Con XAMPP-MySQL importar la BD de jardinería que facilitará el profesor.</p>
<p><strong>Ejemplo E43201 - Contar</strong><br>
Mostrar el número de clientes (nombrar el nuevo campo NumClientes) que tenemos en cada ciudad.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> Ciudad<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> NumClientes
<span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-GROUP">GROUP</span> <span class="token keyword keyword-BY">BY</span> Ciudad<span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E43202 – Sumar operaciones numéricas</strong><br>
Mostrar el pedido y el importe total (ImpTotal) de todas las líneas de cada pedido. En la tabla detallepedidos tenemos el CodigoPedido, y la Cantidad y PrecioUnidad de cada artículo del pedido. Deberemos sumar Cantidad * PrecioUnidad de cada línea y luego sumarlas todas.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token comment">-- Sin Agrupar</span>
<span class="token keyword keyword-SELECT">SELECT</span> CodigoPedido<span class="token punctuation">,</span> Cantidad <span class="token operator">*</span> PrecioUnidad <span class="token keyword keyword-AS">AS</span> ImpLinea
<span class="token keyword keyword-FROM">FROM</span> detallepedidos<span class="token punctuation">;</span>
</code></pre><pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token comment">-- Agrupando por Pedido</span>
<span class="token keyword keyword-SELECT">SELECT</span> CodigoPedido<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>Cantidad <span class="token operator">*</span> PrecioUnidad<span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> ImpTotal
<span class="token keyword keyword-FROM">FROM</span> detallepedidos
<span class="token keyword keyword-GROUP">GROUP</span> <span class="token keyword keyword-BY">BY</span> CodigoPedido<span class="token punctuation">;</span>
</code></pre><p>Podemos añadir también filtros que deban cumplir los registros mediante condiciones en la cláusula <strong>WHERE</strong>.</p>
<p><strong>Ejemplo E43203 – Agrupaciones con condiciones WHERE</strong><br>
Mostrar el número de artículos (NumArticulos) de cada Gama cuyas PrecioVenta mayor que 20€.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> Gama<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> NumArticulos
<span class="token keyword keyword-FROM">FROM</span> productos
<span class="token keyword keyword-WHERE">WHERE</span> PrecioVenta <span class="token operator">&gt;</span> <span class="token number">20</span>
<span class="token keyword keyword-GROUP">GROUP</span> <span class="token keyword keyword-BY">BY</span> Gama<span class="token punctuation">;</span>
</code></pre><p>Pero puede ser que la condición a cumplir sea sobre los campos calculados. En estos casos, la condición irá en la cláusula <strong>HAVING</strong>.</p>
<p><strong>Ejemplo E43204 – Agrupaciones con condiciones HAVING</strong><br>
Mostrar las Gamas de artículos que tengan más de 100 diferentes. Mostrar también el número de artículos (NumArticulos).<br>
S</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code>ELECT Gama<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> NumArticulos
<span class="token keyword keyword-FROM">FROM</span> productos
<span class="token keyword keyword-GROUP">GROUP</span> <span class="token keyword keyword-BY">BY</span> Gama
<span class="token keyword keyword-HAVING">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">;</span>
</code></pre><p>Incluso podemos tener consultas que combinen <strong>WHERE y HAVING</strong> simultáneamente.</p>
<p><strong>Ejemplo E43205 – Agrupaciones con condiciones WHERE y HAVING</strong><br>
Mostrar los clientes que hayan realizado más de 1 pago de cantidad superior a los 3000€.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CodigoCLiente<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> NumPagos
<span class="token keyword keyword-FROM">FROM</span> pagos
<span class="token keyword keyword-WHERE">WHERE</span> Cantidad <span class="token operator">&gt;</span> <span class="token number">3000</span>
<span class="token keyword keyword-GROUP">GROUP</span> <span class="token keyword keyword-BY">BY</span> CodigoCliente
<span class="token keyword keyword-HAVING">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><h2 id="consultas-select-multitabla">Consultas SELECT multitabla </h2>
<h4 id="consultas-multitabla-de-cruce-relación-1-n">Consultas multitabla de cruce (relación 1-N) </h4>
<p>Las consultas multitabla nos van a permitir procesar información de varias tablas conjuntamente. La sintaxis es la misma que hemos visto anteriormente para la sintaxis SELECT, pero en la cláusula FROM tendremos varias tablas.</p>
<p><strong>Ejemplo E44101 – SELECT mutitabla</strong><br>
Mostrar los valores de la tabla <strong>pagos</strong> añadiendo el campo <strong>NombreCliente</strong>.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> clientes<span class="token punctuation">.</span>NombreCliente<span class="token punctuation">,</span> pagos<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> pagos<span class="token punctuation">,</span> clientes
<span class="token keyword keyword-WHERE">WHERE</span> pagos<span class="token punctuation">.</span>CodigoCliente <span class="token operator">=</span> clientes<span class="token punctuation">.</span>CodigoCliente<span class="token punctuation">;</span>
</code></pre><p>¿Cuántos registros tienen la tabla pagos?<br>
¿Cuántos registros tienen la tabla clientes?<br>
¿Cuántos registros devuelve la consulta anterior?<br>
Si se elimina la condición WHERE, ¿cuántos registros obtenemos?. Justifícalo.</p>
<p><strong>Ejemplo E44102 – SELECT mutitabla</strong><br>
Mostrar los valores de la tabla <strong>pedidos</strong> añadiendo el campo <strong>NombreCliente</strong>.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> clientes<span class="token punctuation">.</span>NombreCliente<span class="token punctuation">,</span> pedidos<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> pedidos<span class="token punctuation">,</span> clientes
<span class="token keyword keyword-WHERE">WHERE</span> pedidos<span class="token punctuation">.</span>CodigoCliente <span class="token operator">=</span> clientes<span class="token punctuation">.</span>CodigoCliente<span class="token punctuation">;</span>
</code></pre><p>¿Cuántos registros tienen la tabla pedidos?<br>
¿Cuántos registros tienen la tabla clientes?<br>
¿Cuántos registros devuelve la consulta anterior?<br>
Si se elimina la condición WHERE, ¿cuántos registros obtenemos?. Justifícalo.</p>
<p><strong>Ejemplo E44103 – SELECT mutitabla</strong><br>
Mostrar los valores de la tabla <strong>empleados</strong> añadiendo los campos <strong>Ciudad</strong> y <strong>Pais de la Oficina</strong>.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> oficinas<span class="token punctuation">.</span>Ciudad<span class="token punctuation">,</span> oficinas<span class="token punctuation">.</span>Pais<span class="token punctuation">,</span> empleados<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> oficinas<span class="token punctuation">,</span> empleados
<span class="token keyword keyword-WHERE">WHERE</span> oficinas<span class="token punctuation">.</span>CodigoOficina <span class="token operator">=</span> empleados<span class="token punctuation">.</span>CodigoOficina<span class="token punctuation">;</span>
</code></pre><p>¿Cuántos registros tienen la tabla oficinas?<br>
¿Cuántos registros tienen la tabla empleados?<br>
¿Cuántos registros devuelve la consulta anterior?<br>
Si se elimina la condición WHERE, ¿cuántos registros obtenemos?. Justifícalo.</p>
<p>En relaciones reflexivas, debemos cruzar una tabla consigo misma. Para poder hacer esto, tenemos que asignar un alias a cada tabla para diferenciarlas.<br>
Veamos un ejemplo.</p>
<p><strong>Ejemplo E44104 – SELECT mutitabla</strong><br>
Mostrar los valores de la tabla <strong>empleados</strong> añadiendo los campos <strong>Nombre y Apellido1 de su jefe</strong>.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> jefes<span class="token punctuation">.</span>Nombre<span class="token punctuation">,</span> jefes<span class="token punctuation">.</span>Apellido1<span class="token punctuation">,</span> trabajadores<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> empleados <span class="token keyword keyword-as">as</span> trabajadores<span class="token punctuation">,</span> empleados <span class="token keyword keyword-as">as</span> jefes
<span class="token keyword keyword-WHERE">WHERE</span> trabajadores<span class="token punctuation">.</span>CodigoJefe <span class="token operator">=</span> jefes<span class="token punctuation">.</span>CodigoEmpleado<span class="token punctuation">;</span>
</code></pre><p>¿Cuántos registros tienen la tabla empleados?<br>
¿Cuántos registros devuelve la consulta anterior?<br>
Si se elimina la condición WHERE, ¿cuántos registros obtenemos?. Justifícalo.</p>
<p>También podemos relacionar más de una tabla. Veamos un ejemplo.</p>
<p><strong>Ejemplo E44105 – SELECT mutitabla</strong><br>
Mostrar los siguientes valores:</p>
<ul>
<li>De pedidos: CodigoPedido y FechaPedido</li>
<li>De detallepedidos: CodigoProducto y Cantidad</li>
<li>De productos: Nombre y Gama</li>
</ul>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> pedidos<span class="token punctuation">.</span>CodigoPedido<span class="token punctuation">,</span> pedidos<span class="token punctuation">.</span>FechaPedido<span class="token punctuation">,</span> detallepedidos<span class="token punctuation">.</span>CodigoProducto<span class="token punctuation">,</span> detallepedidos<span class="token punctuation">.</span>Cantidad<span class="token punctuation">,</span> productos<span class="token punctuation">.</span>Nombre<span class="token punctuation">,</span> productos<span class="token punctuation">.</span>Gama
<span class="token keyword keyword-FROM">FROM</span> pedidos<span class="token punctuation">,</span> detallepedidos<span class="token punctuation">,</span> productos
<span class="token keyword keyword-WHERE">WHERE</span> pedidos<span class="token punctuation">.</span>CodigoPedido <span class="token operator">=</span> detallepedidos<span class="token punctuation">.</span>CodigoPedido <span class="token operator">AND</span> detallepedidos<span class="token punctuation">.</span>CodigoProducto <span class="token operator">=</span> productos<span class="token punctuation">.</span>CodigoProducto<span class="token punctuation">;</span>
</code></pre><p>¿Cuántos registros tienen la tabla empleados?<br>
¿Cuántos registros devuelve la consulta anterior?<br>
Si se elimina la condición WHERE, ¿cuántos registros obtenemos?. Justifícalo.</p>
<p>Se puede observar que cuando se muestran datos de la tabla padre de relaciones con cardinalidad 1-N, estos se repiten ya que pueden tener muchos hijos. En el ejemplo anterior se puede ver claramente que los datos de la tabla pedidos se repiten tantas veces como líneas de detalle tengan.</p>
<h4 id="consultas-multitabla-mediante-intersección">Consultas multitabla mediante INTERSECCIÓN </h4>
<p>Las consultas de intersección se pueden ejecutar con la cláusula<br>
<strong>tabla1 INNER JOIN tabla2 ON condicion</strong><br>
El ejemplo anterior quedaría:</p>
<p><strong>Ejemplo E44201 – SELECT mutitabla con INNER JOIN</strong><br>
Mostrar los valores de la tabla <strong>pagos</strong> añadiendo el campo <strong>NombreCliente</strong>.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> clientes<span class="token punctuation">.</span>NombreCliente<span class="token punctuation">,</span> pagos<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> <span class="token punctuation">(</span>pagos <span class="token keyword keyword-INNER">INNER</span> <span class="token keyword keyword-JOIN">JOIN</span> clientes <span class="token keyword keyword-ON">ON</span> pagos<span class="token punctuation">.</span>CodigoCliente <span class="token operator">=</span> clientes<span class="token punctuation">.</span>CodigoCliente<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Veamos otro ejemplo de consulta multitabla:</p>
<p><strong>Ejemplo E44202 – SELECT mutitabla con INNER JOIN</strong><br>
Mostrar los valores de la tabla <strong>detallepedidos</strong> pero añadiendo el campo FechaPedido y Estado de la tabla pedidos. Comprueba que el resultado contiene el mismo número de registros que detallepedidos.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> pedidos<span class="token punctuation">.</span>FechaPedido<span class="token punctuation">,</span> pedidos<span class="token punctuation">.</span>Estado<span class="token punctuation">,</span> detallepedidos<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> <span class="token punctuation">(</span>detallepedidos <span class="token keyword keyword-INNER">INNER</span> <span class="token keyword keyword-JOIN">JOIN</span> pedidos <span class="token keyword keyword-ON">ON</span> detallepedidos<span class="token punctuation">.</span>CodigoPedido <span class="token operator">=</span> pedidos<span class="token punctuation">.</span>CodigoPedido<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>En las consultas multitabla mediante intersección, es posible que haya registros que no se muestren por no haber cruce entre entre ellos. Por ejemplo, si queremos saber el número de pedidos realizados por cada cliente, podríamos pensar en realizar la siguiente consulta:</p>
<p><strong>Ejemplo E44203 – SELECT mutitabla con INNER JOIN</strong></p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> clientes<span class="token punctuation">.</span>CodigoCliente<span class="token punctuation">,</span> clientes<span class="token punctuation">.</span>NombreCliente<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>pedidos<span class="token punctuation">.</span>CodigoPedido<span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> clientes <span class="token keyword keyword-INNER">INNER</span> <span class="token keyword keyword-JOIN">JOIN</span> pedidos <span class="token keyword keyword-ON">ON</span> clientes<span class="token punctuation">.</span>CodigoCliente <span class="token operator">=</span> pedidos<span class="token punctuation">.</span>CodigoCliente
<span class="token keyword keyword-GROUP">GROUP</span> <span class="token keyword keyword-BY">BY</span> clientes<span class="token punctuation">.</span>CodigoCliente<span class="token punctuation">,</span> clientes<span class="token punctuation">.</span>NombreCliente<span class="token punctuation">;</span>
</code></pre><p>En la tabla de clientes hay 36 registros, pero el resultado de la consulta sólo muestra 19. Esto ocurre porque hay clientes que no han realizado todavía ningún pedido. Para evitar esto, se introduce un cambio en la consulta que permite incluir todos los registros de una tabla de la intersección, que en nuestro caso es clientes. Lo haremos con la cláusula <strong>LEFT</strong> de la relación <strong>clientes-pedidos</strong>:</p>
<p><strong>Ejemplo E44204 – SELECT mutitabla con LEFT JOIN</strong></p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> clientes<span class="token punctuation">.</span>CodigoCliente<span class="token punctuation">,</span> clientes<span class="token punctuation">.</span>NombreCliente<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>pedidos<span class="token punctuation">.</span>CodigoPedido<span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> clientes <span class="token keyword keyword-LEFT">LEFT</span> <span class="token keyword keyword-JOIN">JOIN</span> pedidos <span class="token keyword keyword-ON">ON</span> clientes<span class="token punctuation">.</span>CodigoCliente <span class="token operator">=</span> pedidos<span class="token punctuation">.</span>CodigoCliente
<span class="token keyword keyword-GROUP">GROUP</span> <span class="token keyword keyword-BY">BY</span> clientes<span class="token punctuation">.</span>CodigoCliente<span class="token punctuation">,</span> clientes<span class="token punctuation">.</span>NombreCliente<span class="token punctuation">;</span>
</code></pre><p>Veamos otro ejemplo:</p>
<p><strong>Ejemplo E44205 – SELECT mutitabla con LEFT JOIN</strong><br>
Mostrar el CodigoProducto y nombre de la tabla productos junto el la suma de la cantidad (SumCantidad) pedida en todos los pedidos existentes. (tabla detallepedidos).</p>
<blockquote>
<p>Nota: Tened en cuenta que de los productos que no haya habido ningún pedido debe aparecer 0.</p>
</blockquote>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> productos<span class="token punctuation">.</span>CodigoProducto<span class="token punctuation">,</span> productos<span class="token punctuation">.</span>Nombre<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>detallepedidos<span class="token punctuation">.</span>Cantidad<span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> SumCantidad
<span class="token keyword keyword-FROM">FROM</span> productos <span class="token keyword keyword-LEFT">LEFT</span> <span class="token keyword keyword-JOIN">JOIN</span> detallepedidos <span class="token keyword keyword-ON">ON</span> productos<span class="token punctuation">.</span>CodigoProducto <span class="token operator">=</span> detallepedidos<span class="token punctuation">.</span>CodigoProducto
<span class="token keyword keyword-GROUP">GROUP</span> <span class="token keyword keyword-BY">BY</span> productos<span class="token punctuation">.</span>CodigoProducto<span class="token punctuation">,</span> productos<span class="token punctuation">.</span>Nombre<span class="token punctuation">;</span>
</code></pre><p>La cláusula <strong>RIGHT</strong> permitiría que se mostrarán los de la segunda tabla en la relación, en vez de <strong>LEFT</strong> que muestra la primera.</p>
<h4 id="consultas-multitabla-mediante-union">Consultas multitabla mediante UNION </h4>
<p>En ocasiones necesitamos unir el resultado de dos consultas. Para ello el resultado debe mostrar los mismo campos y con los mismos tipos de datos.<br>
Por ejemplo, tenemos por un lado los clientes que han realizado pagos posteriores al 31/01/2009:</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-DISTINCT">DISTINCT</span> CodigoCliente 
<span class="token keyword keyword-FROM">FROM</span> pagos
<span class="token keyword keyword-WHERE">WHERE</span> FechaPago <span class="token operator">&gt;</span> <span class="token string">'2009-01-31'</span><span class="token punctuation">;</span>
</code></pre><p>Por otra parte, tenemos los clientes que han realizado pedidos posteriores al 31/03/2009:</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-DISTINCT">DISTINCT</span> CodigoCliente 
<span class="token keyword keyword-FROM">FROM</span> pedidos
<span class="token keyword keyword-WHERE">WHERE</span> FechaPedido <span class="token operator">&gt;</span> <span class="token string">'2009-03-31'</span><span class="token punctuation">;</span>
</code></pre><p>Los clientes que están en las dos consultas son 16, 23 y 27, pero hay clientes que han realizado pagos y no pedidos, y viceversa.</p>
<p><strong>Ejemplo E44301 – SELECT mutitabla con UNION</strong><br>
Deseamos saber el CodigoCliente de los clientes que han realizado pagos posteriores al 31/03/2009 o pedidos posteriores al 31/03/2009.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-DISTINCT">DISTINCT</span> CodigoCliente
<span class="token keyword keyword-FROM">FROM</span> pagos
<span class="token keyword keyword-WHERE">WHERE</span> FechaPago <span class="token operator">&gt;</span> <span class="token string">'2009-01-31'</span>
<span class="token keyword keyword-UNION">UNION</span>
<span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-DISTINCT">DISTINCT</span> CodigoCliente
<span class="token keyword keyword-FROM">FROM</span> pedidos
<span class="token keyword keyword-WHERE">WHERE</span> FechaPedido <span class="token operator">&gt;</span> <span class="token string">'2009-03-31'</span><span class="token punctuation">;</span>
</code></pre><h4 id="consultas-multitabla-mediante-subconsultas">Consultas multitabla mediante SUBCONSULTAS </h4>
<p>Una <strong>subconsulta</strong> es una instrucción SELECT que se usa dentro de otra instrucción SELECT.</p>
<p>Una <strong>subconsulta</strong> será <strong>correlacionada</strong> si aparecen datos de la consulta, es decir, si no se puede ejecutar de forma independiente.</p>
<p>Existen varias situaciones donde usaremos subconsultas. A continuación veremos algunos ejemplos.</p>
<p><strong><u>Subconsultas en WHERE con operador de comparación</u></strong><br>
Para el siguiente ejemplo, primero buscamos la cantidad media que pagan los clientes.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>Cantidad<span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> CantidadMedia 
<span class="token keyword keyword-FROM">FROM</span> pagos<span class="token punctuation">;</span>
</code></pre><p><strong>Ejemplo E44401 – Subconsulta en WHERE con operador de comparación</strong><br>
Mostrar los registros de pagos que tengan cantidades superiores a la media.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> pagos
<span class="token keyword keyword-WHERE">WHERE</span> Cantidad <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword keyword-SELECT">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>Cantidad<span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> CantidadMedia <span class="token keyword keyword-FROM">FROM</span> pagos<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p><strong><u>Subconsultas en WHERE con operador IN</u></strong><br>
El operador IN devuelve verdadero si el valor del campo de un registro está en el conjunto de valores devuelto por la subsonsulta.</p>
<p><strong>Ejemplo E44402 – Subconsulta en WHERE con operador de IN</strong><br>
Mostrar la Gama de los productos que de los que se haya pedido más de 30 unidades.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-DISTINCT">DISTINCT</span> Gama
<span class="token keyword keyword-FROM">FROM</span> productos
<span class="token keyword keyword-WHERE">WHERE</span> CodigoProducto <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword keyword-SELECT">SELECT</span> CodigoProducto <span class="token keyword keyword-FROM">FROM</span> detallepedidos <span class="token keyword keyword-WHERE">WHERE</span> Cantidad <span class="token operator">&gt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>También puede usarse de forma negativa con <strong>NOT IN</strong></p>
<p><strong><u>Subconsultas en WHERE con operador EXISTS</u></strong><br>
El operador EXISTS es verdadero si la subconsulta devuelve al menos un registro.</p>
<p><strong>Ejemplo E44403 – Subconsulta en WHERE con operador de EXISTS</strong><br>
Utiliza una subconsulta correlacionada para obtener los datos de los empleados que tenga algún cliente asignado.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> empleados
<span class="token keyword keyword-WHERE">WHERE</span> <span class="token keyword keyword-EXISTS">EXISTS</span> <span class="token punctuation">(</span><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span> <span class="token keyword keyword-FROM">FROM</span> Clientes <span class="token keyword keyword-WHERE">WHERE</span> CodigoEmpleadoRepVentas<span class="token operator">=</span>empleados<span class="token punctuation">.</span>CodigoEmpleado<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>También puede usarse de forma negativa con <strong>NOT EXISTS</strong></p>
<p><strong><u>Subconsultas en FROM</u></strong><br>
Podemos utilizar subconsultas como tablas y colocarlas en la cláusula FROM.</p>
<p><strong>Ejemplo E44404 – Subconsulta en FROM</strong><br>
Aunque la siguiente consulta se puede obtener mediante una consulta de intersección típica, usaremos una subconsulta para probar su funcionamiento en FROM de forma sencilla. Las subconsultas de FROM deben tener un alias que asignaremos con AS.<br>
Muestra los datos de los empleados que trabajen en oficinas de Madrid.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> empleados<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> empleados<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span> <span class="token keyword keyword-FROM">FROM</span> oficinas <span class="token keyword keyword-WHERE">WHERE</span> Ciudad<span class="token operator">=</span><span class="token string">'Madrid'</span><span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> OficinasMadrid
<span class="token keyword keyword-WHERE">WHERE</span> empleados<span class="token punctuation">.</span>CodigoOficina <span class="token operator">=</span> OficinasMadrid<span class="token punctuation">.</span>CodigoOficina<span class="token punctuation">;</span>
</code></pre><p>La consulta anterior sin usar subconsulta sería:</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> empleados<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> empleados<span class="token punctuation">,</span> oficinas
<span class="token keyword keyword-WHERE">WHERE</span> empleados<span class="token punctuation">.</span>CodigoOficina <span class="token operator">=</span> oficinas<span class="token punctuation">.</span>CodigoOficina <span class="token operator">AND</span> oficinas<span class="token punctuation">.</span>Ciudad <span class="token operator">=</span> <span class="token string">'Madrid'</span><span class="token punctuation">;</span>
</code></pre><p class="puml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="CLASS" height="88px" preserveAspectRatio="none" style="width:88px;height:88px;background:#FFFFFF;" version="1.1" viewBox="0 0 88 88" width="88px" zoomAndPan="magnify"><defs></defs><g><!--class Bob--><g class="entity" data-entity="Bob" data-source-line="19" data-uid="ent0002" id="entity_Bob"><rect fill="#F1F1F1" height="67.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="67.4939" x="7" y="7"></rect><ellipse cx="26.1913" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"></ellipse><path d="M25.66,29.9219 Q23.91,29.9219 22.7694,29.1875 Q21.6444,28.4375 21.0819,27.0938 Q20.535,25.7344 20.535,23.9375 Q20.535,21.9063 21.1913,20.4531 Q21.8475,19 23.1288,18.2188 Q24.41,17.4375 26.285,17.4375 Q27.1757,17.4375 27.8475,17.625 Q28.5194,17.7969 29.2069,18.1406 L28.3944,20.1563 Q27.7694,19.8438 27.2225,19.7188 Q26.6913,19.5938 26.2069,19.5938 Q25.035,19.5938 24.3319,20.125 Q23.6288,20.6563 23.3319,21.6094 Q23.035,22.5625 23.035,23.8281 Q23.035,25.8438 23.7538,26.8125 Q24.4725,27.7656 26.0663,27.7656 Q26.66,27.7656 27.285,27.6094 Q27.91,27.4531 28.7382,27.0781 L28.7382,29.2969 Q28.0038,29.6094 27.2069,29.7656 Q26.4257,29.9219 25.66,29.9219 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.1799" x="41.1227" y="28.432">Bob</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="73.4939" y1="39" y2="39"></line><image height="16" width="16" x="13" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAhUlEQVR4Xu2S0Q3AIAhEXd0RHMERHMERHIUJ2p4JjeEotf/9eIkB7gJIEpHk0Vo7cs4TvG1eoQAopdxiBTFb5xr03kmsjDHIhAzW1i3eKGQQdYCcrScDYIUg3AFmQ3vK0xLXGt1H2PIb0Lpftgu07rxf+A0ug1orBXfBPcxDiu7fQ48K2hP2EKTblfwirQAAAABJRU5ErkJggg==" y="46.0679"></image><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.8539" x="32.64" y="57.9659">Small</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="73.4939" y1="66.0679" y2="66.0679"></line></g><!--SRC=[Kr1GK2WkACeiILLGSJOfI2qgpiypD308patCoL68DZIhC3JJDpIBLQZc0YfKC0034tDp4mWB8MXc3WHcg8B6vc1WX29e0X4qmQRI6DLCStGpZKnCJ20M0Hb6446eLXWm1WkQeGgQWGNDqG3D14rHnKmWZZT1Tf09nF6rOD8fFqd1Ii468_pj5C0K0000]--></g></svg></p>
      </div>
      
      
    
    
    
    
    
    
  
    </body></html>