<!DOCTYPE html><html><head>
      <title>Apuntes</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}@font-face{font-family:"Material Icons";font-style:normal;font-weight:400;src:local("Material Icons"),local("MaterialIcons-Regular"),url("data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAfIAAsAAAAADDAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAARAAAAFZW7kosY21hcAAAAYAAAADTAAACjtP6ytBnbHlmAAACVAAAAxgAAAQ4zRtvlGhlYWQAAAVsAAAALwAAADYRwZsnaGhlYQAABZwAAAAcAAAAJAeKAzxobXR4AAAFuAAAABIAAAA8OGQAAGxvY2EAAAXMAAAAIAAAACAG5AfwbWF4cAAABewAAAAfAAAAIAEfAERuYW1lAAAGDAAAAVcAAAKFkAhoC3Bvc3QAAAdkAAAAYgAAAK2vz7wkeJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2BkPsQ4gYGVgYOpk+kMAwNDP4RmfM1gxMjBwMDEwMrMgBUEpLmmMDgwVLy4xKzzX4chhrmK4QpQmBEkBwAZygyweJzFkr0NwjAQhZ+TEP6CRUfHBEwRUWaQTICyQbpMwRCskA5RUIONxG0RnnNpKAIV4qzPku/8c353ACYAYrIjCWCuMAh2ptf0/hiL3p/gyPUWa3osqlt0L1zu9r71z8dGrJRykFoauXQd932Lj5vhG+MjxGeYI8MKETObMpslf5EyP8tg+vHun5r539PvlvXzaVhRFVQDTPEWKVQR90KhnnC5Ek67vUKN4VuFasM/ldARj43CCkCsEjpJSoVVgRyU0GVSK6wUpFFCx8lFgX0BiXpRPQB4nE2TTWjcRhTH3xttpDhxN7uxPlp3u/FK7moRPixafRijNosxSw/LUsIwNcaEHPZggo/FmEKMCKWU4kNOOftQSlhE8alnH0Ix9BqWnHooPRrTQ0+mnu2bXTu2pPdGM9LM/6c3fwECTM4gBBMYQNqxzLrZAjqYSlqu2TAHZQA0/DQJH6FtzqGDnvbt4Ggwvzw/nL8EfH8kW0fsuRqhgWXZnY7M1picaUL7Du5BHeDzMIl83dAt016wH1qmvtSMo5R6YRJHTR//FXsff/nj/tc/5K9P5d+nP22+fFK5u7v3K39SW3y+OtDKO3L85vD09PD9z5X17a2N1g4tqk01RlqX7gyoEmnsWQtVr4rtZMmukEaFBZxzefkCn11cyKMLZgshRwgTYNoLNXCBz2ja7HvZG7hDpPSNfoo5vs0knK/9hb+rNpu+8kHPgk/Ao4kK3tWtTpSEtvkA9c+wE6UaUdwieNkaHg55tBEtRiEPw1s0+FtrtTcc9two2lhMknV7PZF/cs6+uUFTmpTGbEx7sQCPSLOttHS3GRltqp7SNzVSKzl6aWnZT/CX5k6/v9N3Hh8fHBwffJVjhrC6OgH5dkIt/tPsq+d/PD5Qz7G7efzq1THFjdZVPe/N6ulQ3JnDWSE5junsFsVIiFwL/htf1S5gJ3BfOcUxfHKLnzqpFpyfZ9cX+/5WB6a+Y0pHpzkNrYNVDwMsikK+y7WuLCRg/oFHkA8VT3rDg5ZnU6ktzzINymV0m74Xd5pfIGXyFeVEQSShkzqG7TBBa2OxVRKitLXv7h3uuftXnXq7lz2tZ/WnWa9dx9dCjDhHzmuVQATlmljr9dZErUydSo2Hbi/b1vXtrOeGCk2/8s3ZlO8+ueJT8BVlw5pGw2oYccdSiHHqx0RlabHqdNR9jAETl6PreJcPBnnfpTLnOQ8C3OV8AmQGzouV1iZdeb5SSIoVc8W8/kcDtksUH5FrU6/aqBqNWcMEzxG4DAQ14qRQhi9mWU0rzepKezbjfgCwQKxVYq5ajRgpRqy45CqwkJydcEkbTkvRz8P5/2ZpDTN4nGNgZGBgAOKb6v+/xvPbfGXgZmEAgeuB2kkI+v8bFgbmKiCXg4EJJAoAPyAKhQB4nGNgZGBg1vmvwxDDwgACQJKRARXwAwAzZQHQeJxjYQCCFAYGFgbSMQAcWACdAAAAAAAAAAwALgBgAIQAmADSAQgBIgE8AVABoAHeAfwCHHicY2BkYGDgZ7BgYGMAASYg5gJCBob/YD4DAA/hAWQAeJxlkbtuwkAURMc88gApQomUJoq0TdIQzEOpUDokKCNR0BuzBiO/tF6QSJcPyHflE9Klyyekz2CuG8cr7547M3d9JQO4xjccnJ57vid2cMHqxDWc40G4Tv1JuEF+Fm6ijRfhM+oz4Ra6eBVu4wZvvMFpXLIa40PYQQefwjVc4Uu4Tv1HuEH+FW7i1mkKn6Hj3Am3sHC6wm08Ou8tpSZGe1av1PKggjSxPd8zJtSGTuinyVGa6/Uu8kxZludCmzxMEzV0B6U004k25W35fj2yNlCBSWM1paujKFWZSbfat+7G2mzc7weiu34aczzFNYGBhgfLfcV6iQP3ACkSaj349AxXSN9IT0j16JepOb01doiKbNWt1ovippz6sVYYwsXgX2rGVFIkq7Pl2PNrI6qW6eOshj0xaSq9mpNEZIWs8LZUfOouNkVXxp/d5woqebeYIf4D2J1ywQB4nG3LOw6AIBAE0B384B+PAkgEa+QwNnYmHt+EpXSal5lkSBBnoP8oCFSo0aCFRIceA0ZMmLFAYSW88rmvtMUjG3RiQ9HvpfusM6zWNmtc5H/iPewha50tOt5PS/QBx2IeSwAA") format("woff")}.admonition{box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2);position:relative;margin:1.5625em 0;padding:0 1.2rem;border-left:.4rem solid rgba(68,138,255,.8);border-radius:.2rem;background-color:rgba(255,255,255,.05);overflow:auto}.admonition>p{margin-top:.8rem}.admonition>.admonition-title{margin:0 -1.2rem;padding:.8rem 1.2rem .8rem 3.6rem;border-bottom:1px solid rgba(68,138,255,.2);background-color:rgba(68,138,255,.1);font-weight:700}.admonition>.admonition-title:before{position:absolute;left:1.2rem;font-size:1.5rem;color:rgba(68,138,255,.8);content:"\E3C9"}.admonition>.admonition-title:before{font-family:Material Icons;font-style:normal;font-variant:normal;font-weight:400;line-height:2rem;text-transform:none;white-space:nowrap;speak:none;word-wrap:normal;direction:ltr}.admonition.abstract,.admonition.summary,.admonition.tldr{border-left-color:rgba(0,176,255,.8)}.admonition.abstract>.admonition-title,.admonition.summary>.admonition-title,.admonition.tldr>.admonition-title{background-color:rgba(0,176,255,.1);border-bottom-color:rgba(0,176,255,.2)}.admonition.abstract>.admonition-title:before,.admonition.summary>.admonition-title:before,.admonition.tldr>.admonition-title:before{color:#00b0ff;content:"\E8D2"}.admonition.hint,.admonition.tip{border-left-color:rgba(0,191,165,.8)}.admonition.hint>.admonition-title,.admonition.tip>.admonition-title{background-color:rgba(0,191,165,.1);border-bottom-color:rgba(0,191,165,.2)}.admonition.hint>.admonition-title:before,.admonition.tip>.admonition-title:before{color:#00bfa5;content:"\E80E"}.admonition.info,.admonition.todo{border-left-color:rgba(0,184,212,.8)}.admonition.info>.admonition-title,.admonition.todo>.admonition-title{background-color:rgba(0,184,212,.1);border-bottom-color:rgba(0,184,212,.2)}.admonition.info>.admonition-title:before,.admonition.todo>.admonition-title:before{color:#00b8d4;content:"\E88E"}.admonition.check,.admonition.done,.admonition.success{border-left-color:rgba(0,200,83,.8)}.admonition.check>.admonition-title,.admonition.done>.admonition-title,.admonition.success>.admonition-title{background-color:rgba(0,200,83,.1);border-bottom-color:rgba(0,200,83,.2)}.admonition.check>.admonition-title:before,.admonition.done>.admonition-title:before,.admonition.success>.admonition-title:before{color:#00c853;content:"\E876"}.admonition.faq,.admonition.help,.admonition.question{border-left-color:rgba(100,221,23,.8)}.admonition.faq>.admonition-title,.admonition.help>.admonition-title,.admonition.question>.admonition-title{background-color:rgba(100,221,23,.1);border-bottom-color:rgba(100,221,23,.2)}.admonition.faq>.admonition-title:before,.admonition.help>.admonition-title:before,.admonition.question>.admonition-title:before{color:#64dd17;content:"\E887"}.admonition.attention,.admonition.caution,.admonition.warning{border-left-color:rgba(255,145,0,.8)}.admonition.attention>.admonition-title,.admonition.caution>.admonition-title,.admonition.warning>.admonition-title{background-color:rgba(255,145,0,.1);border-bottom-color:rgba(255,145,0,.2)}.admonition.attention>.admonition-title:before{color:#ff9100;content:"\E417"}.admonition.caution>.admonition-title:before,.admonition.warning>.admonition-title:before{color:#ff9100;content:"\E002"}.admonition.fail,.admonition.failure,.admonition.missing{border-left-color:rgba(255,82,82,.8)}.admonition.fail>.admonition-title,.admonition.failure>.admonition-title,.admonition.missing>.admonition-title{background-color:rgba(255,82,82,.1);border-bottom-color:rgba(255,82,82,.2)}.admonition.fail>.admonition-title:before,.admonition.failure>.admonition-title:before,.admonition.missing>.admonition-title:before{color:#ff5252;content:"\E14C"}.admonition.bug,.admonition.danger,.admonition.error{border-left-color:rgba(255,23,68,.8)}.admonition.bug>.admonition-title,.admonition.danger>.admonition-title,.admonition.error>.admonition-title{background-color:rgba(255,23,68,.1);border-bottom-color:rgba(255,23,68,.2)}.admonition.danger>.admonition-title:before{color:#ff1744;content:"\E3E7"}.admonition.error>.admonition-title:before{color:#ff1744;content:"\E14C"}.admonition.bug>.admonition-title:before{color:#ff1744;content:"\E868"}.admonition.example,.admonition.snippet{border-left-color:rgba(0,184,212,.8)}.admonition.example>.admonition-title,.admonition.snippet>.admonition-title{background-color:rgba(0,184,212,.1);border-bottom-color:rgba(0,184,212,.2)}.admonition.example>.admonition-title:before,.admonition.snippet>.admonition-title:before{color:#00b8d4;content:"\E242"}.admonition.cite,.admonition.quote{border-left-color:rgba(158,158,158,.8)}.admonition.cite>.admonition-title,.admonition.quote>.admonition-title{background-color:rgba(158,158,158,.1);border-bottom-color:rgba(158,158,158,.2)}.admonition.cite>.admonition-title:before,.admonition.quote>.admonition-title:before{color:#9e9e9e;content:"\E244"}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
@font-face {
  font-family: 'Catamaran';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/catamaran/v19/o-0bIpQoyXQa2RxT7-5B6Ryxs2E_6n1iPHjd5a7dvg.ttf) format('truetype');
}
.markdown-preview.markdown-preview .caso_estudio {
  background-color: #f5f5f5;
  border: 2px solid #969696;
  padding: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .ejercicio {
  background-color: #f5faf5;
  border: 2px solid #969b96;
  padding-left: 15px;
  padding-right: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .contenedor {
  display: flex;
  justify-content: center;
  margin: 30px auto 30px auto;
}
.markdown-preview.markdown-preview .fondo {
  background: url(https://programacioniesbalmis.github.io/Imagenes/BannersMoodle/banner.png);
  background-size: cover;
  width: 75%;
  height: 160px;
  border-radius: 10px;
  position: relative;
}
.markdown-preview.markdown-preview .cita {
  font-family: Arial;
  font-style: italic;
  font-weight: 600;
  text-align: justify;
  line-height: 1.5rem;
  opacity: 0.6;
  color: white;
  padding: 5rem;
  position: relative;
  top: 50%;
  left: 50%;
  font-size: 1.3rem;
  transform: translate(-50%, -50%);
}
.markdown-preview.markdown-preview .abre_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-left: 30px;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, -15%);
}
.markdown-preview.markdown-preview .cierra_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-right: 30px;
  right: 0%;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, 55%);
}
.markdown-preview.markdown-preview .autor {
  font-family: Arial;
  color: white;
  margin: 0px;
  padding-left: 30px;
  position: absolute;
  top: 83%;
  font-size: 1rem;
}
.markdown-preview.markdown-preview .flotante {
  display: flex;
  margin-top: 15px;
  margin-bottom: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    justify-content: center;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    justify-content: space-between;
  }
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: column;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: row;
  }
}
.markdown-preview.markdown-preview .flotante_izq {
  margin-right: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: auto;
  }
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: auto;
  }
}
.markdown-preview.markdown-preview .galeria_imagenes {
  display: flex;
  justify-content: space-evenly;
  align-items: center;
  margin-top: 15px;
  margin-bottom: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .galeria_imagenes {
    flex-direction: column;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .galeria_imagenes {
    flex-direction: row;
  }
}

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="lenguaje-sql">Lenguaje SQL </h1>
<h2 id="contenidos">Contenidos </h2>
<ol>
<li>Lenguaje de Manipulación de Datos</li>
<li>Consultas SELECT básicas</li>
<li>Consultas SELECT de AGRUPACIÓN</li>
<li>Consultas SELECT multitabla</li>
</ol>
<h2 id="lenguaje-de-manipulación-de-datos">Lenguaje de Manipulación de Datos </h2>
<p>:</p><div class="caso_estudio"><p></p>
<p>El <strong>Lenguaje de Manipulación de Datos</strong> (<strong>LMD</strong>, en inglés Data Manipulation Language, <strong>DML</strong>) es un lenguaje proporcionado por el sistema de gestión de base de datos que permite a los usuarios de la misma llevar a cabo las tareas de consulta o manipulación de los datos (inserción, borrado, actualización y consultas) basado en el modelo de datos adecuado.</p>
</div> <!-- fin caso de estudio -->
<div class="admonition note">
<p class="admonition-title"><a href="http://dev.mysql.com/doc/refman/8.0/en/sql-syntax-data-manipulation.html">MySQL Oficial – Sintaxis de las instrucciones DML</a></p>
</div>
<div class="caso_estudio">
<p>Las <strong>consultas</strong> recuperan información de las tablas de una base de datos mediante la selección de campos, la realización de filtros y la transformación de los datos recuperados.</p>
</div> <!-- fin caso de estudio -->
<p>El uso de consultas permite:</p>
<ul>
<li><strong>Elegir tablas.</strong> Se puede obtener información de una sola tabla o de varias.</li>
<li><strong>Elegir campos.</strong> Se pueden especificar los campos a visualizar de cada tabla.</li>
<li><strong>Elegir registros.</strong> Se pueden seleccionar los registros a mostrar en la hoja de respuestas dinámica, especificando un criterio.</li>
<li><strong>Ordenar registros.</strong> Se puede ordenar la información en forma ascendente o<br>
descendente.</li>
<li><strong>Realizar cálculos.</strong> Se pueden emplear las consultas para hacer cálculos con los datos de las tablas.</li>
</ul>
<p>Además, en consultas más complejas se puede:</p>
<ul>
<li><strong>Crear tablas.</strong> Se puede generar otra tabla a partir de los datos combinados de una consulta. La tabla se genera a partir de la hoja de respuestas dinámica.</li>
<li><strong>Consultas encadenadas.</strong> Utilizar una consulta como origen de datos para otras consultas (subconsulta). Se pueden crear consultas adicionales basadas en un conjunto de registros seleccionados por una consulta anterior.</li>
</ul>
<h2 id="consultas-select-básicas">Consultas <strong><code>SELECT</code></strong> básicas </h2>
<h3 id="consultas-con-operaciones-numéricas-y-literales">Consultas con operaciones numéricas y literales </h3>
<p>Comenzaremos por utilizar la instrucción <strong><code>SELECT</code></strong> como si fuera una calculadora.  Para ello utilizaremos los siguientes operadores aritméticos:</p>
<table>
<thead>
<tr>
<th style="text-align:left">Operador</th>
<th style="text-align:left">Función</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>+</strong></td>
<td style="text-align:left">Suma</td>
</tr>
<tr>
<td style="text-align:left"><strong>-</strong></td>
<td style="text-align:left">Resta</td>
</tr>
<tr>
<td style="text-align:left"><strong>*</strong></td>
<td style="text-align:left">Producto o Multiplicación</td>
</tr>
<tr>
<td style="text-align:left"><strong>/</strong></td>
<td style="text-align:left">División</td>
</tr>
<tr>
<td style="text-align:left"><strong>DIV</strong></td>
<td style="text-align:left">División entera</td>
</tr>
<tr>
<td style="text-align:left"><strong>MOD</strong> o <strong>%</strong></td>
<td style="text-align:left">Resto división</td>
</tr>
</tbody>
</table>
<p>Los siguientes ejemplos evaluan las expresiones que hay después de la cláusula <strong><code>SELECT</code></strong> y muestran el resultado por pantalla.</p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 1</p>
<p>El último ejemplo muestra tres columnas.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token comment">-- Salida: 3000</span>
<span class="token keyword keyword-SELECT">SELECT</span> <span class="token number">20</span> <span class="token operator">*</span> <span class="token number">150</span><span class="token punctuation">;</span>

<span class="token comment">-- Salida: 14.5</span>
<span class="token keyword keyword-SELECT">SELECT</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> <span class="token number">4.5</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span>

<span class="token comment">-- Salida: 33.333333333, 33, 1</span>
<span class="token keyword keyword-SELECT">SELECT</span> <span class="token number">100</span> <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token operator">DIV</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">100</span> MOD <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 2</p>
<p>Para el uso de literales o cadenas de caracteres basta con colocar unas comillas.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token comment">-- Salida: Felicidades</span>
<span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">'Felicidades'</span><span class="token punctuation">;</span>

<span class="token comment">-- Salida: Precio, 25 * 1.21 =, 30.25</span>
<span class="token keyword keyword-SELECT">SELECT</span> <span class="token string">'Precio'</span><span class="token punctuation">,</span> <span class="token string">'25 * 1.21 ='</span><span class="token punctuation">,</span> <span class="token number">25</span> <span class="token operator">*</span> <span class="token number">1.21</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title"> Referencias</p>
<p><a href="http://mysql.conclase.net/curso/?cap=010b#OPE_ARITMETICOS">MySQL – Operadores aritméticos</a><br>
<a href="https://dev.mysql.com/doc/refman/8.0/en/non-typed-operators.html">MySQL Oficial - Operadores</a></p>
</div>
<h3 id="consultas-con-funciones-predefinidas-de-información">Consultas con funciones predefinidas de información </h3>
<p>A través de funciones ya predefinidas en el MySQL podemos obtener información sobre diferentes aspectos del  estado de nuestra conexión y del sistema. Algunos ejemplos son:</p>
<div class="admonition example">
<p class="admonition-title"> Ejemplo 1</p>
<p>La <strong>versión</strong> de MySQL y nuestro identificador (<strong>ID</strong>) de conexión.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> connection_id<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title"> Ejemplo 2</p>
<p>El usuario actual con el que estamos conectados y la base de datos seleccionada.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-user">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword keyword-database">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title"> Ejemplo 3</p>
<p>Fecha y hora (<strong><code>now()</code></strong> o sólo la fecha <strong><code>current_date()</code></strong>) del sistema.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword keyword-current_date">current_date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title"> Referencias</p>
<p><a href="https://conclase.net/mysql/curso/sqlfun/CURRENT_USER">MySQL – Funciones de información</a><br>
<a href="https://dev.mysql.com/doc/refman/8.0/en/information-functions.html">MySQL Oficial – Funciones de información</a></p>
</div>
<h3 id="consultas-básicas-a-tablas">Consultas básicas a tablas </h3>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token punctuation">[</span><span class="token keyword keyword-DISTINCT">DISTINCT</span><span class="token punctuation">]</span> campos
<span class="token punctuation">[</span><span class="token keyword keyword-FROM">FROM</span> table_references<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword keyword-WHERE">WHERE</span> where_definition<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword keyword-ORDER">ORDER</span> <span class="token keyword keyword-BY">BY</span> {col_name <span class="token operator">|</span> expr <span class="token operator">|</span> position} <span class="token punctuation">[</span><span class="token keyword keyword-ASC">ASC</span> <span class="token operator">|</span> <span class="token keyword keyword-DESC">DESC</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword keyword-LIMIT">LIMIT</span> <span class="token punctuation">[</span><span class="token keyword keyword-offset">offset</span><span class="token punctuation">,</span><span class="token punctuation">]</span> row_count<span class="token punctuation">]</span>
</code></pre><div class="caso_estudio">
<p>✋ <strong>Importante</strong><br>
El orden de las cláusulas, <strong>obligatoriamente</strong>, es:<br>
<strong>SELECT … FROM … WHERE … ORDER … LIMIT</strong></p>
</div> <!-- fin caso de estudio -->
<h3 id="utilidad-de-captura">Utilidad de captura </h3>
<p>En muchas ocasiones nos interesaría llevar un registro de las instrucciones SQL ejecutadas y su resultrado. Conectados con la utilidad <strong><code>mysql.exe</code></strong> a MySQL podemos grabar toda la salida a un archivo a través de un comando:</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>mysql&gt; tee archivo.txt
mysql&gt; … instrucciones SQL …**
</code></pre><p>Para terminar la salida:</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>mysql&gt; notee
</code></pre><h4 id="ejemplos-de-las-primeras-consultas">Ejemplos de las primeras consultas </h4>
<p>Con XAMPP-MySQL importar la BD de jardinería que facilitará el profesor.</p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 1</p>
<p><strong>Tablas completas</strong><br>
Mostrar todos los campos de todos los clientes.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> clientes<span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 2</p>
<p><strong>Seleccionar campos a mostrar</strong><br>
Mostrar los campos <strong><code>CodigoCliente</code></strong>, <strong><code>NombreCliente</code></strong>, <strong><code>Telefono</code></strong>, <strong><code>Ciudad</code></strong>, <strong><code>Region</code></strong>, <strong><code>Pais</code></strong> de todos los clientes.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CodigoCliente<span class="token punctuation">,</span> NombreCliente<span class="token punctuation">,</span> Telefono<span class="token punctuation">,</span> Ciudad<span class="token punctuation">,</span> Region<span class="token punctuation">,</span> Pais
<span class="token keyword keyword-FROM">FROM</span> clientes<span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 3</p>
<p><strong>Campos calculados</strong><br>
Mostrar los campos <strong><code>CodigoCliente</code></strong>, <strong><code>NombreCliente</code></strong>, <strong><code>LimiteCredito</code></strong> de todos los clientes añadiendo un campo calculado que es el <strong><code>LimiteCreditoMensual</code></strong> como <strong><code>LimiteCredito / 12</code></strong>. Haced la division entera para evitar decimales. Utilizaremos el <strong>alias de campo</strong> con la palabra reservada <strong><strong><code>AS</code></strong></strong>.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CodigoCliente<span class="token punctuation">,</span> NombreCliente<span class="token punctuation">,</span> LimiteCredito<span class="token punctuation">,</span> LimiteCredito <span class="token operator">DIV</span> <span class="token number">12</span> <span class="token keyword keyword-AS">AS</span> LimiteCreditoMensual
<span class="token keyword keyword-FROM">FROM</span> clientes<span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 4</p>
<p><strong>No mostrar repetidos</strong><br>
Mostrar las regiones (campo <strong><code>Region</code></strong>) todos los clientes evitando resultandos repetidos.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-DISTINCT">DISTINCT</span> Region
<span class="token keyword keyword-FROM">FROM</span> clientes<span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 5</p>
<p><strong>Ordenar registros</strong><br>
Mostrar todos los campos de todos los clientes ordenados por <strong><code>LimiteCredito</code></strong> ordenado descendentemente.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span> <span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-ORDER">ORDER</span> <span class="token keyword keyword-BY">BY</span> LimiteCredito <span class="token keyword keyword-DESC">DESC</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 6</p>
<p><strong>Limitar el número de registros a mostrar del resultado</strong><br>
Utilizando la consulta del ejemplo anterior mostrar:</p>
<ul>
<li>Sólo los 5 primeros registros<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span> 
<span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-ORDER">ORDER</span> <span class="token keyword keyword-BY">BY</span> LimiteCredito <span class="token keyword keyword-DESC">DESC</span>
<span class="token keyword keyword-LIMIT">LIMIT</span> <span class="token number">5</span><span class="token punctuation">;</span>
</code></pre></li>
<li>Empezando en el tercer registro, mostrar 10 registros<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-ORDER">ORDER</span> <span class="token keyword keyword-BY">BY</span> LimiteCredito <span class="token keyword keyword-DESC">DESC</span>
<span class="token keyword keyword-LIMIT">LIMIT</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">;</span>
</code></pre></li>
</ul>
</div>
<h3 id="consultas-con-selección-de-registros">Consultas con selección de registros </h3>
<p>Para poder seleccionar registros es necesario indicar la condición que deben cumplir los campos de un registro para ser mostrado. Para ello se utiliza la sección <strong><code>WHERE</code></strong> de la instrucción SQL.<br>
Los operadores relacionales que nos permiten comparar el valor de los campos son:</p>
<table>
<thead>
<tr>
<th style="text-align:left">Operador</th>
<th style="text-align:left">Función</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>=</strong></td>
<td style="text-align:left">Igual a</td>
</tr>
<tr>
<td style="text-align:left"><strong>&lt;</strong></td>
<td style="text-align:left">Menor que</td>
</tr>
<tr>
<td style="text-align:left"><strong>&gt;</strong></td>
<td style="text-align:left">Mayor que</td>
</tr>
<tr>
<td style="text-align:left"><strong>&lt;=</strong></td>
<td style="text-align:left">Menor o igual</td>
</tr>
<tr>
<td style="text-align:left"><strong>&gt;=</strong></td>
<td style="text-align:left">Mayor ou igual</td>
</tr>
<tr>
<td style="text-align:left"><strong>LIKE</strong></td>
<td style="text-align:left">Patrón que debe cumprir un campo cadena</td>
</tr>
<tr>
<td style="text-align:left"><strong>BETWEEN</strong></td>
<td style="text-align:left">Intervalo de valores</td>
</tr>
<tr>
<td style="text-align:left"><strong>IN</strong></td>
<td style="text-align:left">Conjunto de valores</td>
</tr>
<tr>
<td style="text-align:left"><strong>IS NULL</strong></td>
<td style="text-align:left">Es nulo</td>
</tr>
<tr>
<td style="text-align:left"><strong>IS NOT NULL</strong></td>
<td style="text-align:left">No es nulo</td>
</tr>
</tbody>
</table>
<p>Veamos unos cuantos ejemplos:</p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 1</p>
<p><strong>Buscar un registro por el valor de su clave</strong><br>
Mostrar todos los campos del cliente con código igual a 12.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-WHERE">WHERE</span> CodigoCliente <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>
</code></pre><blockquote>
<p>📌 Al ser el campo clave, el resultado sólo mostrará un registro.</p>
</blockquote>
</div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 2</p>
<p><strong>Buscar registros por el valor de un campo</strong><br>
Mostrar todos los campos de los clientes de la <strong><code>Región</code></strong> <em>Madrid</em>.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-WHERE">WHERE</span> Region <span class="token operator">=</span> <span class="token string">'Madrid'</span><span class="token punctuation">;</span>
</code></pre><blockquote>
<p>📌 Al NO ser un campo clave, el resultado puede mostrar más de un registro.</p>
</blockquote>
</div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 3</p>
<p><strong>Buscar registros por comparación del valor de un campo</strong><br>
Mostrar todos los campos de los clientes con Límite de Crédito mayor de 50000€.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-WHERE">WHERE</span> LimiteCredito <span class="token operator">&gt;</span> <span class="token number">50000</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 4</p>
<p><strong>Buscar registros por comparación del valor de un campo</strong><br>
Mostrar todos los campos de los clientes con Límite de Crédito entre 10000€ y 60000€.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-WHERE">WHERE</span> LimiteCredito <span class="token operator">BETWEEN</span> <span class="token number">10000</span> <span class="token operator">AND</span> <span class="token number">60000</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 5</p>
<p><strong>Buscar registros por comparación del valor de un campo</strong><br>
Mostrar todos los campos de los clientes con la <strong><code>Región</code></strong> nula.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-WHERE">WHERE</span> Region <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 6</p>
<p><strong>Ejemplo combinando con el ejemplo anterior</strong><br>
Mostrar los Países de los clientes con la <strong><code>Región</code></strong> nula, sin repetir valores.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-DISTINCT">DISTINCT</span> Pais
<span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-WHERE">WHERE</span> Region <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 7</p>
<p><strong>Ejemplo con el operador <code>LIKE</code></strong><br>
Mostrar los Empleados cuyo <strong><code>email</code></strong> contenga <em>jardin</em>.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> Empleados
<span class="token keyword keyword-WHERE">WHERE</span> Email <span class="token operator">LIKE</span> <span class="token string">'%jardin%'</span><span class="token punctuation">;</span>
</code></pre><blockquote>
<p>📌 <strong>%</strong> es una cadena de caracteres cualquiera y <strong>_</strong> es un sólo carácter cualquiera.</p>
</blockquote>
</div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 8</p>
<p><strong>Ejemplo con el operador <strong><code>IN</code></strong></strong><br>
Mostrar los productos de las gamas <em>Aromáticas</em>, <em>Herramientas</em> y <em>Ornamentales</em>.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> productos
<span class="token keyword keyword-WHERE">WHERE</span> Gama <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'Aromáticas'</span><span class="token punctuation">,</span> <span class="token string">'Herramientas'</span><span class="token punctuation">,</span> <span class="token string">'Ornamentales'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title"> Referencias</p>
<p><a href="http://mysql.conclase.net/curso/?cap=009">MySQL – Consultas</a><br>
<a href="http://mysql.conclase.net/curso/?cap=010a#OPE_COMPARACION">MySQL – Operadores de comparación</a><br>
<a href="https://dev.mysql.com/doc/refman/8.0/en/comparison-operators.html">MySQL Oficial – Operadores de comparación</a></p>
</div>
<h3 id="consultas-con-varias-condiciones">Consultas con varias condiciones </h3>
<p>Para poder realizar varias varias condiciones necesitamos combinarlas con operadores lógicos, que en MySQL son:</p>
<table>
<thead>
<tr>
<th style="text-align:center">Operador</th>
<th style="text-align:center">Función</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>AND</strong></td>
<td style="text-align:center">Y</td>
</tr>
<tr>
<td style="text-align:center"><strong>OR</strong></td>
<td style="text-align:center">O</td>
</tr>
<tr>
<td style="text-align:center"><strong>NOT</strong></td>
<td style="text-align:center">No</td>
</tr>
</tbody>
</table>
<p>Veamos unos cuantos ejemplos:</p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 1</p>
<p><strong>Ejemplo con varias condiciones</strong><br>
Mostrar codigo (<strong><code>CodigoProducto</code></strong>) y <strong><code>nombre</code></strong> de los Productos que sean de la <strong><code>Gama</code></strong> <em>Frutales</em> y <strong><code>CantidadEnSock</code></strong> sea mayor que 50 unidades. Mostremos también los campos implicados en las condiciones para comprobar el resultado.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CodigoProducto<span class="token punctuation">,</span> Nombre<span class="token punctuation">,</span> Gama<span class="token punctuation">,</span>
<span class="token keyword keyword-FROM">FROM</span> productos
<span class="token keyword keyword-WHERE">WHERE</span> Gama <span class="token operator">=</span> <span class="token string">'Frutales'</span> <span class="token operator">AND</span> CantidadEnStock <span class="token operator">&gt;</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 2</p>
<p><strong>Ejemplo con varias condiciones</strong><br>
Mostrar código y nombre de los Clientes que sean de la <strong><code>Ciudad</code></strong> <em>Madrid</em> o <em>Barcelona</em>. Mostremos también los campos implicados en las condiciones para comprobar el resultado.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CodigoCliente<span class="token punctuation">,</span> NombreCliente<span class="token punctuation">,</span> Ciudad
<span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-WHERE">WHERE</span> Ciudad <span class="token operator">=</span> <span class="token string">'Madrid'</span> <span class="token operator">OR</span> Ciudad <span class="token operator">=</span> <span class="token string">'Barcelona'</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title"> Referencias</p>
<p><a href="http://mysql.conclase.net/curso/?cap=010#OPE_LOGICOS">MySQL – Consultas y operadores de comparación (curso)</a><br>
<a href="https://dev.mysql.com/doc/refman/8.0/en/logical-operators.html">MySQL Oficial – Operadores lógicos</a></p>
</div>
<h3 id="consultas-con-funciones">Consultas con funciones </h3>
<p>Las funciones nos permiten realizar transformaciones de los datos para obtener información. Existen multitud de funciones que procesan diferentes tipos de datos.</p>
<p><em><strong>Algunas funciones con cadenas de caracteres</strong></em></p>
<table>
<thead>
<tr>
<th style="text-align:left">Función</th>
<th style="text-align:left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>CONCAT(cad1, cad2, ...)</strong></td>
<td style="text-align:left">Concatena cadenas</td>
</tr>
<tr>
<td style="text-align:left"><strong>UPPER(cad)</strong></td>
<td style="text-align:left">Pasa a mayúsculas una cadena</td>
</tr>
<tr>
<td style="text-align:left"><strong>LOWER(cad)</strong></td>
<td style="text-align:left">Pasa a minúsculas una cadena</td>
</tr>
<tr>
<td style="text-align:left"><strong>LTRIM(cad)</strong></td>
<td style="text-align:left">Elimina de la cadena los espacios iniciales y finales</td>
</tr>
<tr>
<td style="text-align:left"><strong>LEFT(cad, X)</strong></td>
<td style="text-align:left">Obtiene los X primeros caracteres de la cadena</td>
</tr>
<tr>
<td style="text-align:left"><strong>RIGHT(cad, X)</strong></td>
<td style="text-align:left">Obtiene los X últimos caracteres de la cadena</td>
</tr>
<tr>
<td style="text-align:left"><strong>LENGTH(cad)</strong></td>
<td style="text-align:left">Longitud de una cadena</td>
</tr>
<tr>
<td style="text-align:left"><strong>REPLACE(cad, ant, pos)</strong></td>
<td style="text-align:left">Obtiene una cadena tomando <strong>cad</strong> como origen y cambiando <strong>ant</strong> por <strong>pos</strong></td>
</tr>
</tbody>
</table>
<p><em><strong>Algunas funciones numéricas de un campo</strong></em></p>
<table>
<thead>
<tr>
<th style="text-align:left">Función</th>
<th style="text-align:left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>RAND()</strong></td>
<td style="text-align:left">Número aleatorio entre 0 y 1</td>
</tr>
<tr>
<td style="text-align:left"><strong>POW(num, exp)</strong></td>
<td style="text-align:left">Obtiene la potencia de num^exp</td>
</tr>
<tr>
<td style="text-align:left"><strong>FLOOR(num)</strong></td>
<td style="text-align:left">Obtiene la parte entera de un número decimal</td>
</tr>
<tr>
<td style="text-align:left"><strong>ROUND(num, X)</strong></td>
<td style="text-align:left">Redondea un número a X decimales</td>
</tr>
<tr>
<td style="text-align:left"><strong>SIGN(num)</strong></td>
<td style="text-align:left">Devuelve 1 para positivo, 0 para 0 y -1 para negativo</td>
</tr>
<tr>
<td style="text-align:left"><strong>ABS(num)</strong></td>
<td style="text-align:left">Obtiene el valor absoluto de un número</td>
</tr>
</tbody>
</table>
<p><em><strong>Algunas funciones de fechas de un campo</strong></em></p>
<table>
<thead>
<tr>
<th style="text-align:left">Función</th>
<th style="text-align:left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>YEAR(campo)</strong></td>
<td style="text-align:left">Muestra el año del valor de un campo de tipo fecha</td>
</tr>
<tr>
<td style="text-align:left"><strong>MONTH(campo)</strong></td>
<td style="text-align:left">Muestra el mes del valor de un campo de tipo fecha</td>
</tr>
<tr>
<td style="text-align:left"><strong>DAY(campo)</strong></td>
<td style="text-align:left">Muestra el día del valor de un campo de tipo fecha</td>
</tr>
<tr>
<td style="text-align:left"><strong>DAYNAME(campo)</strong></td>
<td style="text-align:left">Muestra el nombre del día de la semana del campo</td>
</tr>
<tr>
<td style="text-align:left"><strong>DAYOFWEEK(campo)</strong></td>
<td style="text-align:left">Devuelve un número indicando el día de la semana de un campo fecha: <br><strong>Nota:</strong> 1=Domingo, 2=Lunes, 3=Martes, 4=Miércoles, 5=Jueves, 6=Viernes, 7=Sábado.</td>
</tr>
</tbody>
</table>
<p><em><strong>Algunas funciones numéricas con varios registros</strong></em></p>
<table>
<thead>
<tr>
<th style="text-align:left">Función</th>
<th style="text-align:left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>COUNT(*)</strong></td>
<td style="text-align:left">Cuenta los registros seleccionados</td>
</tr>
<tr>
<td style="text-align:left"><strong>MIN(campo)</strong></td>
<td style="text-align:left">Valor mínimo del campo de los registros seleccionados</td>
</tr>
<tr>
<td style="text-align:left"><strong>MAX(campo)</strong></td>
<td style="text-align:left">Valor máximo del campo de los registros seleccionados</td>
</tr>
<tr>
<td style="text-align:left"><strong>SUM(campo)</strong></td>
<td style="text-align:left">Suma de los valores del campo</td>
</tr>
<tr>
<td style="text-align:left"><strong>AVG(campo)</strong></td>
<td style="text-align:left">Media de los valores del campo</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Referencias</p>
<p><a href="https://www.w3schools.com/sql/sql_ref_mysql.asp">MySQL w3schools – Funciones de MySQL</a><br>
<a href="https://dev.mysql.com/doc/refman/8.0/en/functions.htm">MySQL Oficial – Funciones</a></p>
</div>
<p><em><strong>Funciones para campos calculados y para condiciones</strong></em></p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 1</p>
<p><strong>Ejemplo con funciones</strong><br>
Mostrar código (<strong><code>CodigoProducto</code></strong>), <strong><code>nombre</code></strong> y <em><strong><code>precio de venta al público</code></strong></em> de los productos, pero ese precio debe ser con IVA incluido, es decir, agregarle al <strong><code>PrecioVenta</code></strong> el 21% multiplicándolo por 1.21. Asignar el alias <strong><code>pvp</code></strong> al nuevo campo calculado.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CodigoProducto<span class="token punctuation">,</span> Nombre<span class="token punctuation">,</span> PrecioVenta<span class="token punctuation">,</span> <span class="token function">ROUND</span><span class="token punctuation">(</span>PrecioVenta <span class="token operator">*</span> <span class="token number">1.21</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> pvp
<span class="token keyword keyword-FROM">FROM</span> Productos<span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 2</p>
<p><strong>Ejemplo con funciones en las condiciones</strong><br>
Seleccionar en la consulta anterior los productos que tengan el nuevo campo <strong><code>pvp</code></strong> mayor de 100€.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CodigoProducto<span class="token punctuation">,</span> Nombre<span class="token punctuation">,</span> PrecioVenta<span class="token punctuation">,</span> <span class="token function">ROUND</span><span class="token punctuation">(</span>PrecioVenta <span class="token operator">*</span> <span class="token number">1.21</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> pvp
<span class="token keyword keyword-FROM">FROM</span> Productos
<span class="token keyword keyword-WHERE">WHERE</span> <span class="token function">ROUND</span><span class="token punctuation">(</span>PrecioVenta <span class="token operator">*</span> <span class="token number">1.21</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">;</span>
</code></pre></div>
<p><em><strong>Funciones para manjo de cadenas de caracteres</strong></em></p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 3</p>
<p><strong>Ejemplo con funciones</strong><br>
Seleccionar de los empleados el nombre completo (<strong><code>NombreCompleto</code></strong>) concatenando el nombre y los dos apellidos.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CONCAT<span class="token punctuation">(</span>Nombre<span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">,</span> Apellido1<span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">,</span> Apellido2<span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> NombreCompleto
<span class="token keyword keyword-FROM">FROM</span> empleados<span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 4</p>
<p><strong>Ejemplo con funciones</strong><br>
Obtener la inicial del <strong><code>nombre</code></strong> de todos los empleados.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-LEFT">LEFT</span><span class="token punctuation">(</span>Nombre<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> inicial 
<span class="token keyword keyword-FROM">FROM</span> empleados<span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 5</p>
<p><strong>Ejemplo con funciones</strong><br>
Obtener el <strong><code>nombre</code></strong> de los empleados todo en mayúsculas.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token function">UCASE</span><span class="token punctuation">(</span>Nombre<span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> empleados<span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 6</p>
<p><strong>Ejemplo con funciones</strong><br>
Obtener el código de las oficinas (<strong><code>CodigoOficina</code></strong>) pero sustituyendo el guión por la barra, es decir, el '-' por '/'.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-REPLACE">REPLACE</span><span class="token punctuation">(</span>CodigoOficina<span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">,</span> <span class="token string">'/'</span><span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> oficinas<span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 7</p>
<p><strong>Ejemplo con funciones</strong><br>
Obtener la primera palabra del nombre del <strong><code>proveedor</code></strong> de todos los productos.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> SUBSTRING_INDEX<span class="token punctuation">(</span>Proveedor<span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> productos<span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 8</p>
<p><strong>Ejemplo con funciones</strong><br>
Obtener el código de los productos pero con el orden de los caracteres invertido.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CodigoProducto<span class="token punctuation">,</span> REVERSE<span class="token punctuation">(</span>CodigoProducto<span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> productos<span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 9</p>
<p><strong>Ejemplo con funciones</strong><br>
Obtener un gráfico de barras para el stock de cada producto. Utilizaremos el carácter '|' por cada unidad de stock.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> Codigoproducto<span class="token punctuation">,</span> <span class="token keyword keyword-REPEAT">REPEAT</span><span class="token punctuation">(</span><span class="token string">'|'</span><span class="token punctuation">,</span> CantidadEnStock<span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> productos<span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 10</p>
<p><strong>Ejemplo con funciones</strong><br>
Obtener el email de cada empleado teniendo en cuenta que el usuario es su nombre en minúsculas y el dominio <em>@iesdoctorbalmis.com</em>.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CONCAT<span class="token punctuation">(</span><span class="token function">LCASE</span><span class="token punctuation">(</span>nombre<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'@iesdoctorbalmis.com'</span><span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> email
<span class="token keyword keyword-FROM">FROM</span> empleados<span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 11</p>
<p><strong>Ejemplo con funciones</strong><br>
Obtener la abreviatura del nombre y primer apellido de los empleados concatenando la inicial del nombre y la inicial del apellido1.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CONCAT<span class="token punctuation">(</span><span class="token keyword keyword-LEFT">LEFT</span><span class="token punctuation">(</span>Nombre<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword keyword-LEFT">LEFT</span><span class="token punctuation">(</span>Apellido1<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> inicial
<span class="token keyword keyword-FROM">FROM</span> empleados<span class="token punctuation">;</span>
</code></pre></div>
<p><em><strong>Funciones numéricas</strong></em></p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 12</p>
<p><strong>Ejemplo con funciones</strong><br>
Obtener un número aleatorio entre 0 y 9.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> FLOOR<span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">*</span> RAND<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p><em><strong>Funciones de fechas</strong></em></p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 13</p>
<p><strong>Ejemplo con funciones</strong><br>
Mostrar en campos diferentes el año, el mes y el día de la fecha de los pedidos.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-YEAR">YEAR</span><span class="token punctuation">(</span>FechaPedido<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword keyword-MONTH">MONTH</span><span class="token punctuation">(</span>FechaPedido<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword keyword-DAY">DAY</span><span class="token punctuation">(</span>FechaPedido<span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> pedidos<span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 14</p>
<p><strong>Ejemplo con funciones</strong><br>
Mostrar todos los campos de pedidos realizados en enero del 2009.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> pedidos
<span class="token keyword keyword-WHERE">WHERE</span> <span class="token keyword keyword-YEAR">YEAR</span><span class="token punctuation">(</span>FechaPedido<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2009</span> <span class="token operator">AND</span> <span class="token keyword keyword-MONTH">MONTH</span><span class="token punctuation">(</span>FechaPedido<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 15</p>
<p><strong>Ejemplo con funciones</strong><br>
Mostrar todos los campos de pedidos realizados en lunes.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> pedidos
<span class="token keyword keyword-WHERE">WHERE</span> DAYOFWEEK<span class="token punctuation">(</span>FechaEntrega<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre></div>
<p><em><strong>Funciones numéricas con varios registros</strong></em></p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 16</p>
<p><strong>Ejemplo con funciones</strong><br>
Mostrar el número total de pagos que se han recibido.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> pagos<span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 17</p>
<p><strong>Ejemplo con funciones</strong><br>
Mostrar la cantidad en euros total que nos han ingresado.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>Cantidad<span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> pagos<span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 18</p>
<p><strong>Ejemplo con funciones</strong><br>
Mostrar el importe del pago más pequeño y el importe de pago más grande recibido.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>Cantidad<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">MAX</span><span class="token punctuation">(</span>Cantidad<span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> pagos<span class="token punctuation">;</span>
</code></pre></div>
<h2 id="consultas-select-de-agrupación">Consultas <strong><code>SELECT</code></strong> de AGRUPACIÓN </h2>
<h3 id="consultas-de-agrupación">Consultas de agrupación </h3>
<p>Cuando necesitamos agrupar varios registros para realizar operaciones para sumar, contar, o calcular la media, el mínimo o el máximo, necesitaremos realizar una instrucción <strong><code>SELECT</code></strong> indicando qué registros agrupamos, es decir, qué campos mostramos de los registros comunes y sobre qué campos realizamos la operación.<br>
La sintaxis para realizar una consulta agrupada a una tabla es:</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token punctuation">[</span><span class="token keyword keyword-DISTINCT">DISTINCT</span><span class="token punctuation">]</span> campos
<span class="token punctuation">[</span><span class="token keyword keyword-FROM">FROM</span> table_references<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword keyword-WHERE">WHERE</span> where_definition<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword keyword-GROUP">GROUP</span> <span class="token keyword keyword-BY">BY</span> {col_name <span class="token operator">|</span> expr <span class="token operator">|</span> position} <span class="token punctuation">[</span><span class="token keyword keyword-ASC">ASC</span> <span class="token operator">|</span> <span class="token keyword keyword-DESC">DESC</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword keyword-HAVING">HAVING</span> where_definition<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword keyword-ORDER">ORDER</span> <span class="token keyword keyword-BY">BY</span> {col_name <span class="token operator">|</span> expr <span class="token operator">|</span> position} <span class="token punctuation">[</span><span class="token keyword keyword-ASC">ASC</span> <span class="token operator">|</span> <span class="token keyword keyword-DESC">DESC</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword keyword-LIMIT">LIMIT</span> <span class="token punctuation">[</span><span class="token keyword keyword-offset">offset</span><span class="token punctuation">,</span><span class="token punctuation">]</span> row_count<span class="token punctuation">]</span>
</code></pre><div class="caso_estudio">
<p>✋ <strong>Importante</strong><br>
El orden de las cláusulas, <strong>obligatoriamente</strong>, es:<br>
<strong>SELECT … FROM … WHERE … GROUP BY … HAVING … ORDER … LIMIT</strong></p>
</div> <!-- fin caso de estudio -->
<h3 id="ejemplos-de-las-primeras-consultas-agrupadas">Ejemplos de las primeras consultas agrupadas </h3>
<p>Con XAMPP-MySQL importar la <strong>BD de jardinería</strong> que facilitará el profesor.</p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 1</p>
<p><strong>Contar</strong><br>
Mostrar el número de clientes (nombrar el nuevo campo <strong><code>NumClientes</code></strong>) que tenemos en cada <strong><code>ciudad</code></strong>.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> Ciudad<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> NumClientes
<span class="token keyword keyword-FROM">FROM</span> clientes
<span class="token keyword keyword-GROUP">GROUP</span> <span class="token keyword keyword-BY">BY</span> Ciudad<span class="token punctuation">;</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 2</p>
<p><strong>Sumar operaciones numéricas</strong><br>
Mostrar el pedido y el importe total (<strong><code>ImpTotal</code></strong>) de todas las líneas de cada pedido. En la tabla detallepedidos tenemos el <strong><code>CodigoPedido</code></strong>, la <strong><code>Cantidad</code></strong> y el <strong><code>PrecioUnidad</code></strong> de cada artículo del pedido. Deberemos sumar <strong><code>Cantidad * PrecioUnidad</code></strong> de cada línea y luego sumarlas todas.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token comment">-- Sin Agrupar</span>
<span class="token keyword keyword-SELECT">SELECT</span> CodigoPedido<span class="token punctuation">,</span> Cantidad <span class="token operator">*</span> PrecioUnidad <span class="token keyword keyword-AS">AS</span> ImpLinea
<span class="token keyword keyword-FROM">FROM</span> detallepedidos<span class="token punctuation">;</span>

<span class="token comment">-- Agrupando por Pedido</span>
<span class="token keyword keyword-SELECT">SELECT</span> CodigoPedido<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>Cantidad <span class="token operator">*</span> PrecioUnidad<span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> ImpTotal
<span class="token keyword keyword-FROM">FROM</span> detallepedidos
<span class="token keyword keyword-GROUP">GROUP</span> <span class="token keyword keyword-BY">BY</span> CodigoPedido<span class="token punctuation">;</span>
</code></pre></div>
<p>Podemos añadir también filtros que deban cumplir los registros mediante condiciones en la cláusula <strong><code>WHERE</code></strong>.</p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 3</p>
<p><strong>Agrupaciones con condiciones <code>WHERE</code></strong><br>
Mostrar el número de artículos (<strong><code>NumArticulos</code></strong>) de cada Gama cuyas <strong><code>PrecioVenta</code></strong> mayor que 20€.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> Gama<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> NumArticulos
<span class="token keyword keyword-FROM">FROM</span> productos
<span class="token keyword keyword-WHERE">WHERE</span> PrecioVenta <span class="token operator">&gt;</span> <span class="token number">20</span>
<span class="token keyword keyword-GROUP">GROUP</span> <span class="token keyword keyword-BY">BY</span> Gama<span class="token punctuation">;</span>
</code></pre></div>
<p>Pero puede ser que la condición a cumplir sea sobre los campos calculados. En estos casos, la condición irá en la cláusula <strong><strong><code>HAVING</code></strong></strong>.</p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 4</p>
<p><strong>Agrupaciones con condiciones <code>HAVING</code></strong><br>
Mostrar las gamas (<strong><code>Gama</code></strong>) de artículos que tengan más de 100 diferentes. Mostrar también el número de artículos (<strong><code>NumArticulos</code></strong>).</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> Gama<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> NumArticulos
<span class="token keyword keyword-FROM">FROM</span> productos
<span class="token keyword keyword-GROUP">GROUP</span> <span class="token keyword keyword-BY">BY</span> Gama
<span class="token keyword keyword-HAVING">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Incluso podemos tener consultas que combinen <strong><code>WHERE</code></strong> y <strong><code>HAVING</code></strong> simultáneamente.</p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 5</p>
<p><strong>Agrupaciones con condiciones <strong><code>WHERE</code></strong> y <strong><code>HAVING</code></strong></strong><br>
Mostrar los clientes que hayan realizado más de 1 pago de cantidad superior a los 3000€.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> CodigoCLiente<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> NumPagos
<span class="token keyword keyword-FROM">FROM</span> pagos
<span class="token keyword keyword-WHERE">WHERE</span> Cantidad <span class="token operator">&gt;</span> <span class="token number">3000</span>
<span class="token keyword keyword-GROUP">GROUP</span> <span class="token keyword keyword-BY">BY</span> CodigoCliente
<span class="token keyword keyword-HAVING">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div>
<h2 id="consultas-select-multitabla">Consultas SELECT multitabla </h2>
<h3 id="consultas-multitabla-de-cruce-relación-1-n">Consultas multitabla de cruce (relación 1-N) </h3>
<p>Las consultas multitabla nos van a permitir procesar información de varias tablas conjuntamete. La sintaxis es la misma que hemos visto anteriormente para la sintaxis <strong><code>SELECT</code></strong>, pero en la cláusula <strong><code>FROM</code></strong> tendremos <strong>varias tablas</strong>.</p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 1</p>
<p><strong>SELECT multitabla</strong><br>
Mostrar los valores de la tabla <strong>pagos</strong> añadiendo el campo <strong><code>NombreCliente</code></strong>.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> clientes<span class="token punctuation">.</span>NombreCliente<span class="token punctuation">,</span> pagos<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> pagos<span class="token punctuation">,</span> clientes
<span class="token keyword keyword-WHERE">WHERE</span> pagos<span class="token punctuation">.</span>CodigoCliente <span class="token operator">=</span> clientes<span class="token punctuation">.</span>CodigoCliente<span class="token punctuation">;</span>
</code></pre><p>¿Cuántos registros tienen la tabla pagos?<br>
¿Cuántos registros tienen la tabla clientes?<br>
¿Cuántos registros devuelve la consulta anterior?<br>
Si se elimina la condición <strong><code>WHERE</code></strong>, ¿cuántos registros obtenemos? Justifícalo.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 2</p>
<p><strong>SELECT multitabla</strong><br>
Mostrar los valores de la tabla <strong>pedidos</strong> añadiendo el campo <strong><code>NombreCliente</code></strong>.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> clientes<span class="token punctuation">.</span>NombreCliente<span class="token punctuation">,</span> pedidos<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> pedidos<span class="token punctuation">,</span> clientes
<span class="token keyword keyword-WHERE">WHERE</span> pedidos<span class="token punctuation">.</span>CodigoCliente <span class="token operator">=</span> clientes<span class="token punctuation">.</span>CodigoCliente<span class="token punctuation">;</span>
</code></pre><p>¿Cuántos registros tienen la tabla pedidos?<br>
¿Cuántos registros tienen la tabla clientes?<br>
¿Cuántos registros devuelve la consulta anterior?<br>
Si se elimina la condición <strong><code>WHERE</code></strong>, ¿cuántos registros obtenemos? Justifícalo.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 3</p>
<p><strong>SELECT multitabla</strong><br>
Mostrar los valores de la tabla <strong>empleados</strong> añadiendo los campos <strong><code>Ciudad</code></strong>,  <strong><code>Pais</code></strong> y la oficina del país <strong><code>CodigoOficina</code></strong>.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> oficinas<span class="token punctuation">.</span>Ciudad<span class="token punctuation">,</span> oficinas<span class="token punctuation">.</span>Pais<span class="token punctuation">,</span> empleados<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> oficinas<span class="token punctuation">,</span> empleados
<span class="token keyword keyword-WHERE">WHERE</span> oficinas<span class="token punctuation">.</span>CodigoOficina <span class="token operator">=</span> empleados<span class="token punctuation">.</span>CodigoOficina<span class="token punctuation">;</span>
</code></pre><p>¿Cuántos registros tienen la tabla oficinas?<br>
¿Cuántos registros tienen la tabla empleados?<br>
¿Cuántos registros devuelve la consulta anterior?<br>
Si se elimina la condición <strong><code>WHERE</code></strong>, ¿cuántos registros obtenemos? Justifícalo.</p>
</div>
<p>En relaciones reflexivas, debemos cruzar una tabla consigo misma. Para poder hacer esto, tenemos que asignar un alias a cada tabla para diferenciarlas.<br>
Veamos un ejemplo.</p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 4</p>
<p><strong>SELECT multitabla con relación reflexiva</strong><br>
Mostrar los valores de la tabla <strong>empleados</strong> añadiendo los campos <strong><code>Nombre</code></strong> y <strong><code>Apellido1</code></strong> de su jefe.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> jefes<span class="token punctuation">.</span>Nombre<span class="token punctuation">,</span> jefes<span class="token punctuation">.</span>Apellido1<span class="token punctuation">,</span> trabajadores<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> empleados <span class="token keyword keyword-as">as</span> trabajadores<span class="token punctuation">,</span> empleados <span class="token keyword keyword-as">as</span> jefes
<span class="token keyword keyword-WHERE">WHERE</span> trabajadores<span class="token punctuation">.</span>CodigoJefe <span class="token operator">=</span> jefes<span class="token punctuation">.</span>CodigoEmpleado<span class="token punctuation">;</span>
</code></pre><p>¿Cuántos registros tienen la tabla empleados?<br>
¿Cuántos registros devuelve la consulta anterior?<br>
Si se elimina la condición <strong><code>WHERE</code></strong>, ¿cuántos registros obtenemos? Justifícalo.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Ejemplo 5</p>
<p><strong>SELECT multitabla con varias tablas</strong><br>
Mostrar los siguientes valores:</p>
<ul>
<li>De <strong>pedidos</strong>: <strong><code>CodigoPedido</code></strong> y <strong><code>FechaPedido</code></strong></li>
<li>De <strong>detallepedidos</strong>: <strong><code>CodigoProducto</code></strong> y <strong><code>Cantidad</code></strong></li>
<li>De <strong>productos</strong>: <strong><code>Nombre</code></strong> y <strong><code>Gama</code></strong></li>
</ul>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> pedidos<span class="token punctuation">.</span>CodigoPedido<span class="token punctuation">,</span> pedidos<span class="token punctuation">.</span>FechaPedido<span class="token punctuation">,</span> detallepedidos<span class="token punctuation">.</span>CodigoProducto<span class="token punctuation">,</span> detallepedidos<span class="token punctuation">.</span>Cantidad<span class="token punctuation">,</span> productos<span class="token punctuation">.</span>Nombre<span class="token punctuation">,</span> productos<span class="token punctuation">.</span>Gama
<span class="token keyword keyword-FROM">FROM</span> pedidos<span class="token punctuation">,</span> detallepedidos<span class="token punctuation">,</span> productos
<span class="token keyword keyword-WHERE">WHERE</span> pedidos<span class="token punctuation">.</span>CodigoPedido <span class="token operator">=</span> detallepedidos<span class="token punctuation">.</span>CodigoPedido <span class="token operator">AND</span> detallepedidos<span class="token punctuation">.</span>CodigoProducto <span class="token operator">=</span> productos<span class="token punctuation">.</span>CodigoProducto<span class="token punctuation">;</span>
</code></pre><p>¿Cuántos registros tienen la tabla empleados?<br>
¿Cuántos registros devuelve la consulta anterior?<br>
Si se elimina la condición <strong><code>WHERE</code></strong>, ¿cuántos registros obtenemos? Justifícalo.</p>
</div>
<p>Se puede observar que cuando se muestran datos de la tabla padre de relaciones con cardinalidad 1-N, estos se repiten ya que pueden tener muchos hijos. En el ejemplo anterior se puede ver claramente que los datos de la tabla pedidos se repiten tantas veces como líneas de detalle tengan.</p>
<h3 id="consultas-multitabla-mediante-intersección">Consultas multitabla mediante INTERSECCIÓN </h3>
<p>Las consultas de intersección se pueden ejecutar con la cláusula</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code>tabla1 <span class="token keyword keyword-INNER">INNER</span> <span class="token keyword keyword-JOIN">JOIN</span> tabla2 <span class="token keyword keyword-ON">ON</span> condicion
</code></pre><p>El ejemplo anterior quedaría:</p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 1</p>
<p><strong>SELECT multitabla con <code>INNER JOIN</code></strong><br>
Mostrar los valores de la tabla <strong>pagos</strong> añadiendo el campo <strong><code>NombreCliente</code></strong>.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> clientes<span class="token punctuation">.</span>NombreCliente<span class="token punctuation">,</span> pagos<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> <span class="token punctuation">(</span>pagos <span class="token keyword keyword-INNER">INNER</span> <span class="token keyword keyword-JOIN">JOIN</span> clientes <span class="token keyword keyword-ON">ON</span> pagos<span class="token punctuation">.</span>CodigoCliente <span class="token operator">=</span> clientes<span class="token punctuation">.</span>CodigoCliente<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Veamos otro ejemplo de consulta multitabla:</p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 2</p>
<p><strong>SELECT multitabla con <code>INNER JOIN</code></strong><br>
Mostrar los valores de la tabla <strong>detallepedidos</strong> pero añadiendo los campos <strong><code>FechaPedido</code></strong> y <strong><code>Estado</code></strong> de la tabla pedidos. Comprueba que el resultado contiene el mismo número de registros que detallepedidos.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> pedidos<span class="token punctuation">.</span>FechaPedido<span class="token punctuation">,</span> pedidos<span class="token punctuation">.</span>Estado<span class="token punctuation">,</span> detallepedidos<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> <span class="token punctuation">(</span>detallepedidos <span class="token keyword keyword-INNER">INNER</span> <span class="token keyword keyword-JOIN">JOIN</span> pedidos <span class="token keyword keyword-ON">ON</span> detallepedidos<span class="token punctuation">.</span>CodigoPedido <span class="token operator">=</span> pedidos<span class="token punctuation">.</span>CodigoPedido<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>En las consultas multitabla mediante intersección, <strong>es posible que haya registros que no se muestren por no haber cruce entre entre ellos</strong>. Por ejemplo, si queremos saber el número de pedidos realizados por cada cliente, podríamos pensar en realizar la siguiente consulta:</p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 3</p>
<p><strong>SELECT multitabla con <code>INNER JOIN</code></strong><br>
Mostrar el número de pedidos realizados por cada cliente.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> clientes<span class="token punctuation">.</span>CodigoCliente<span class="token punctuation">,</span> clientes<span class="token punctuation">.</span>NombreCliente<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>pedidos<span class="token punctuation">.</span>CodigoPedido<span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> clientes <span class="token keyword keyword-INNER">INNER</span> <span class="token keyword keyword-JOIN">JOIN</span> pedidos <span class="token keyword keyword-ON">ON</span> clientes<span class="token punctuation">.</span>CodigoCliente <span class="token operator">=</span> pedidos<span class="token punctuation">.</span>CodigoCliente
<span class="token keyword keyword-GROUP">GROUP</span> <span class="token keyword keyword-BY">BY</span> clientes<span class="token punctuation">.</span>CodigoCliente<span class="token punctuation">,</span> clientes<span class="token punctuation">.</span>NombreCliente<span class="token punctuation">;</span>
</code></pre></div>
<p>En la tabla de clientes hay 36 registros, pero el resultado de la consulta sólo muestra 19. Esto ocurre porque hay clientes que no han realizado todavía ningún pedido.</p>
<p>Para evitar esto, se introduce un cambio en la consulta que permite incluir todos los registros de una tabla de la intersección, que en nuestro caso es clientes. Lo haremos con la cláusula <strong><code>LEFT</code></strong> de la relación <strong>clientes-pedidos</strong>:</p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 4</p>
<p><strong>SELECT multitabla con <code>LEFT JOIN</code></strong><br>
Mostrar el número de pedidos realizados por cada cliente, incluyendo aquellos que no han realizado ninguno.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> clientes<span class="token punctuation">.</span>CodigoCliente<span class="token punctuation">,</span> clientes<span class="token punctuation">.</span>NombreCliente<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>pedidos<span class="token punctuation">.</span>CodigoPedido<span class="token punctuation">)</span>
<span class="token keyword keyword-FROM">FROM</span> clientes <span class="token keyword keyword-LEFT">LEFT</span> <span class="token keyword keyword-JOIN">JOIN</span> pedidos <span class="token keyword keyword-ON">ON</span> clientes<span class="token punctuation">.</span>CodigoCliente <span class="token operator">=</span> pedidos<span class="token punctuation">.</span>CodigoCliente
<span class="token keyword keyword-GROUP">GROUP</span> <span class="token keyword keyword-BY">BY</span> clientes<span class="token punctuation">.</span>CodigoCliente<span class="token punctuation">,</span> clientes<span class="token punctuation">.</span>NombreCliente<span class="token punctuation">;</span>
</code></pre></div>
<p>Veamos otro ejemplo:</p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 5</p>
<p><strong>SELECT multitabla con <code>LEFT JOIN</code></strong><br>
Mostrar el <strong><code>CodigoProducto</code></strong> y nombre de la tabla <strong>productos</strong> junto con la suma de la cantidad (<strong><code>SumCantidad</code></strong>) pedida en todos los pedidos existentes.</p>
<blockquote>
<p>📌 Tened en cuenta que de los productos que no haya habido ningún pedido debe aparecer 0.</p>
</blockquote>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> productos<span class="token punctuation">.</span>CodigoProducto<span class="token punctuation">,</span> productos<span class="token punctuation">.</span>Nombre<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>detallepedidos<span class="token punctuation">.</span>Cantidad<span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> SumCantidad
<span class="token keyword keyword-FROM">FROM</span> productos <span class="token keyword keyword-LEFT">LEFT</span> <span class="token keyword keyword-JOIN">JOIN</span> detallepedidos <span class="token keyword keyword-ON">ON</span> productos<span class="token punctuation">.</span>CodigoProducto <span class="token operator">=</span> detallepedidos<span class="token punctuation">.</span>CodigoProducto
<span class="token keyword keyword-GROUP">GROUP</span> <span class="token keyword keyword-BY">BY</span> productos<span class="token punctuation">.</span>CodigoProducto<span class="token punctuation">,</span> productos<span class="token punctuation">.</span>Nombre<span class="token punctuation">;</span>
</code></pre></div>
<p>La cláusula <strong><code>RIGHT</code></strong> permitiría que se mostrarán los de la segunda tabla en la relación, en vez de <strong><code>LEFT</code></strong> que muestra la primera.</p>
<h3 id="consultas-multitabla-mediante-union">Consultas multitabla mediante <code>UNION</code> </h3>
<p>En ocasiones necesitamos unir el resultado de dos consultas. Para ello el resultado debe mostrar los mismo campos y con los mismos tipos de datos.<br>
Por ejemplo, tenemos por un lado los clientes que han realizado pagos posteriores al 31/01/2009:</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-DISTINCT">DISTINCT</span> CodigoCliente
<span class="token keyword keyword-FROM">FROM</span> pagos
<span class="token keyword keyword-WHERE">WHERE</span> FechaPago <span class="token operator">&gt;</span> <span class="token string">'2009-01-31'</span><span class="token punctuation">;</span>
</code></pre><p>Por otra parte, tenemos los clientes que han realizado pedidos posteriores al 31/03/2009:</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-DISTINCT">DISTINCT</span> CodigoCliente
<span class="token keyword keyword-FROM">FROM</span> pedidos
<span class="token keyword keyword-WHERE">WHERE</span> FechaPedido <span class="token operator">&gt;</span> <span class="token string">'2009-03-31'</span><span class="token punctuation">;</span>
</code></pre><p>Los clientes que están en las dos consultas son 16, 23 y 27, pero hay clientes que han realizado pagos y no pedidos, y viceversa.</p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 1</p>
<p><strong>SELECT multitabla con <code>UNION</code></strong><br>
Mostrar el <strong><code>CodigoCliente</code></strong> de los clientes que han realizado pagos posteriores al 31/03/2009 o pedidos posteriores al 31/03/2009.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-DISTINCT">DISTINCT</span> CodigoCliente
<span class="token keyword keyword-FROM">FROM</span> pagos
<span class="token keyword keyword-WHERE">WHERE</span> FechaPago <span class="token operator">&gt;</span> <span class="token string">'2009-01-31'</span>
<span class="token keyword keyword-UNION">UNION</span>
<span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-DISTINCT">DISTINCT</span> CodigoCliente
<span class="token keyword keyword-FROM">FROM</span> pedidos
<span class="token keyword keyword-WHERE">WHERE</span> FechaPedido <span class="token operator">&gt;</span> <span class="token string">'2009-03-31'</span><span class="token punctuation">;</span>
</code></pre></div>
<h3 id="consultas-multitabla-mediante-subconsultas">Consultas multitabla mediante SUBCONSULTAS </h3>
<div class="caso_estudio">
<p>Una <strong>subconsulta</strong> es una instrucción <strong><code>SELECT</code></strong> que se usa dentro de otra instrucción <strong><code>SELECT</code></strong>.</p>
</div> <!-- fin caso de estudio -->
<div class="caso_estudio">
<p>Una <strong>subconsulta</strong> será <strong>correlacionada</strong> si aparecen datos de la consulta, es decir, si no se puede ejecutar de forma independiente.</p>
</div> <!-- fin caso de estudio -->
<p>Existen varias situaciones donde usaremos subconsultas. A continuación veremos algunos ejemplos.</p>
<h4 id="subconsultas-en-where-con-operador-de-comparación">Subconsultas en <strong><code>WHERE</code></strong> con operador de comparación </h4>
<p>Para el siguiente ejemplo, primero buscamos la cantidad media que pagan los clientes.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>Cantidad<span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> CantidadMedia 
<span class="token keyword keyword-FROM">FROM</span> pagos<span class="token punctuation">;</span>
</code></pre><div class="admonition example">
<p class="admonition-title">Ejemplo 1</p>
<p><strong>Subconsulta en <strong><code>WHERE</code></strong> con operador de comparación</strong><br>
Mostrar los registros de pagos que tengan cantidades superiores a la media.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> pagos
<span class="token keyword keyword-WHERE">WHERE</span> Cantidad <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword keyword-SELECT">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>Cantidad<span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> CantidadMedia <span class="token keyword keyword-FROM">FROM</span> pagos<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<h4 id="subconsultas-en-where-con-operador-in">Subconsultas en <code>WHERE</code> con operador <code>IN</code> </h4>
<p>El operador <strong><code>IN</code></strong> devuelve verdadero si el valor del campo de un registro está en el conjunto de valores devuelto por la subsonsulta.</p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 2</p>
<p><strong>Subconsulta en <code>WHERE</code> con operador <code>IN</code></strong><br>
Mostrar la <strong><code>Gama</code></strong> de los productos de los que se haya pedido más de 30 unidades.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token keyword keyword-DISTINCT">DISTINCT</span> Gama
<span class="token keyword keyword-FROM">FROM</span> productos
<span class="token keyword keyword-WHERE">WHERE</span> CodigoProducto <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword keyword-SELECT">SELECT</span> CodigoProducto <span class="token keyword keyword-FROM">FROM</span> detallepedidos <span class="token keyword keyword-WHERE">WHERE</span> Cantidad <span class="token operator">&gt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>También puede usarse de forma negativa con <strong><code>NOT IN</code></strong></p>
<h4 id="subconsultas-en-where-con-operador-exists">Subconsultas en <code>WHERE</code> con operador <code>EXISTS</code> </h4>
<p>El operador <strong><code>EXISTS</code></strong> es verdadero si la subconsulta devuelve al menos un registro.</p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 3</p>
<p><strong>Subconsulta en <code>WHERE</code> con operador <code>EXISTS</code></strong><br>
Obtener los datos de los empleados que tengan algún cliente asignado.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> empleados
<span class="token keyword keyword-WHERE">WHERE</span> <span class="token keyword keyword-EXISTS">EXISTS</span> <span class="token punctuation">(</span><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span> <span class="token keyword keyword-FROM">FROM</span> Clientes <span class="token keyword keyword-WHERE">WHERE</span> CodigoEmpleadoRepVentas <span class="token operator">=</span> empleados<span class="token punctuation">.</span>CodigoEmpleado<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>También puede usarse de forma negativa con <strong>NOT EXISTS</strong></p>
<h4 id="subconsultas-en-from">Subconsultas en <code>FROM</code> </h4>
<p>Podemos utilizar subconsultas como tablas y colocarlas en la cláusula <strong><code>FROM</code></strong>.</p>
<div class="admonition example">
<p class="admonition-title">Ejemplo 4</p>
<p><strong>Subconsulta en <code>FROM</code></strong><br>
Aunque la siguiente consulta se puede obtener mediante una consulta de intersección típica, usaremos una subconsulta para probar su funcionamiento en <strong><code>FROM</code></strong> de forma sencilla. Las subconsultas de <strong><code>FROM</code></strong> deben tener un alias que  signaremos con <strong><code>AS</code></strong>.<br>
Mostrar los datos de los empleados que trabajen en oficinas de Madrid.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> empleados<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> empleados<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span> <span class="token keyword keyword-FROM">FROM</span> oficinas <span class="token keyword keyword-WHERE">WHERE</span> Ciudad <span class="token operator">=</span> <span class="token string">'Madrid'</span><span class="token punctuation">)</span> <span class="token keyword keyword-AS">AS</span> OficinasMadrid
<span class="token keyword keyword-WHERE">WHERE</span> empleados<span class="token punctuation">.</span>CodigoOficina <span class="token operator">=</span> OficinasMadrid<span class="token punctuation">.</span>CodigoOficina<span class="token punctuation">;</span>
</code></pre><p>La consulta anterior sin usar subconsulta sería:</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> empleados<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword keyword-FROM">FROM</span> empleados<span class="token punctuation">,</span> oficinas
<span class="token keyword keyword-WHERE">WHERE</span> empleados<span class="token punctuation">.</span>CodigoOficina <span class="token operator">=</span> oficinas<span class="token punctuation">.</span>CodigoOficina <span class="token operator">AND</span> oficinas<span class="token punctuation">.</span>Ciudad <span class="token operator">=</span> <span class="token string">'Madrid'</span><span class="token punctuation">;</span>
</code></pre></div>

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>